

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Base API &#8212; DNIKit 2.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/dnikit/base';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Processors API" href="processors.html" />
    <link rel="prev" title="dnikit" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    <p class="title logo__title">DNIKit 2.0.0 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../general/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/example_notebooks.html">Example Jupyter Notebooks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How to Use</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../how_to/dnikit_concepts.html">1. DNIKit overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/connect_model.html">2. Load a model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/connect_data.html">3. Load data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/introspect.html">4. Introspect</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Algorithms</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../introspectors/data_introspection.html">Data Introspectors</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../introspectors/data_introspection/dataset_report.html">Dataset Report</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/data_introspection/dataset_report.html">Jupyter Notebook: Dataset Report</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../introspectors/data_introspection/familiarity.html">Familiarity</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/data_introspection/familiarity_for_rare_data_discovery.html">Jupyter Notebook: Familiarity for Rare Data Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/data_introspection/familiarity_for_dataset_distribution.html">Jupyter Notebook: Familiarity for Comparison of Dataset Distribution</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../introspectors/data_introspection/duplicates.html">Duplicates</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/data_introspection/duplicates.html">Jupyter Notebook: Find Near-Duplicate Data</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../introspectors/data_introspection/dimension_reduction.html">Dimension Reduction</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/data_introspection/dimension_reduction.html">Jupyter Notebook: Dimension Reduction Strategies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../introspectors/model_introspection.html">Network Introspectors</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../introspectors/model_introspection/network_compression.html">Network Compression with PFA</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/model_introspection/principal_filter_analysis.html">Jupyter Notebook: Principal Filter Analysis (PFA)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../introspectors/model_introspection/inactive_units.html">Find Inactive Units with IUA</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/model_introspection/inactive_unit_analysis.html">Jupyter Notebook: Inactive Unit Analysis (IUA)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Utilities</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../utils/data_producers.html">Data Producers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils/pipeline_stages.html">Batch Processors</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">DNIKit API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html"><code class="docutils literal notranslate"><span class="pre">dnikit</span></code></a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Base API</a></li>
<li class="toctree-l3"><a class="reference internal" href="processors.html">Processors API</a></li>
<li class="toctree-l3"><a class="reference internal" href="introspectors.html">Introspectors API</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="typing.html">Typing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tensorflow/index.html"><code class="docutils literal notranslate"><span class="pre">dnikit_tensorflow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../torch/index.html"><code class="docutils literal notranslate"><span class="pre">dnikit_torch</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/how_to_cite.html">Citing DNIKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/support.html">Support</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../dev/contributing.html">Contributor’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/changelog.html">Changelog</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/api/dnikit/base.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Base API</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-management-producer">Data Management – Producer</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Producer"><code class="docutils literal notranslate"><span class="pre">Producer</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-management-batch">Data Management – Batch</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch"><code class="docutils literal notranslate"><span class="pre">Batch</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.batch_size"><code class="docutils literal notranslate"><span class="pre">Batch.batch_size</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.elements"><code class="docutils literal notranslate"><span class="pre">Batch.elements</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.fields"><code class="docutils literal notranslate"><span class="pre">Batch.fields</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.metadata"><code class="docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.snapshots"><code class="docutils literal notranslate"><span class="pre">Batch.snapshots</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementsView"><code class="docutils literal notranslate"><span class="pre">ElementsView</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementsView.__getitem__"><code class="docutils literal notranslate"><span class="pre">ElementsView.__getitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementsView.__iter__"><code class="docutils literal notranslate"><span class="pre">ElementsView.__iter__()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType"><code class="docutils literal notranslate"><span class="pre">ElementType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType.fields"><code class="docutils literal notranslate"><span class="pre">ElementType.fields</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType.metadata"><code class="docutils literal notranslate"><span class="pre">ElementType.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType.snapshots"><code class="docutils literal notranslate"><span class="pre">ElementType.snapshots</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetaKey"><code class="docutils literal notranslate"><span class="pre">MetaKey</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetaKey.name"><code class="docutils literal notranslate"><span class="pre">MetaKey.name</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.DictMetaKey"><code class="docutils literal notranslate"><span class="pre">DictMetaKey</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.DictMetaKey.name"><code class="docutils literal notranslate"><span class="pre">DictMetaKey.name</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType"><code class="docutils literal notranslate"><span class="pre">MetadataType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.__bool__"><code class="docutils literal notranslate"><span class="pre">MetadataType.__bool__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.__contains__"><code class="docutils literal notranslate"><span class="pre">MetadataType.__contains__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.__getitem__"><code class="docutils literal notranslate"><span class="pre">MetadataType.__getitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.keys"><code class="docutils literal notranslate"><span class="pre">MetadataType.keys()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType"><code class="docutils literal notranslate"><span class="pre">ElementType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType.__bool__"><code class="docutils literal notranslate"><span class="pre">ElementType.__bool__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType.__contains__"><code class="docutils literal notranslate"><span class="pre">ElementType.__contains__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType.__getitem__"><code class="docutils literal notranslate"><span class="pre">ElementType.__getitem__()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder"><code class="docutils literal notranslate"><span class="pre">Builder</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.fields"><code class="docutils literal notranslate"><span class="pre">Builder.fields</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.make_batch"><code class="docutils literal notranslate"><span class="pre">Builder.make_batch()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.metadata"><code class="docutils literal notranslate"><span class="pre">Builder.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.snapshots"><code class="docutils literal notranslate"><span class="pre">Builder.snapshots</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys"><code class="docutils literal notranslate"><span class="pre">StdKeys</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys.IDENTIFIER"><code class="docutils literal notranslate"><span class="pre">StdKeys.IDENTIFIER</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys.LABELS"><code class="docutils literal notranslate"><span class="pre">StdKeys.LABELS</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys.PATH"><code class="docutils literal notranslate"><span class="pre">StdKeys.PATH</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__bool__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__bool__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__contains__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__contains__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__delitem__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__delitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__getitem__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__getitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__setitem__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__setitem__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pipelines">Pipelines</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.pipeline"><code class="docutils literal notranslate"><span class="pre">pipeline()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.PipelineStage"><code class="docutils literal notranslate"><span class="pre">PipelineStage</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.PipelineStage._get_batch_processor"><code class="docutils literal notranslate"><span class="pre">PipelineStage._get_batch_processor()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.PipelineStage._pipeline"><code class="docutils literal notranslate"><span class="pre">PipelineStage._pipeline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model.__call__"><code class="docutils literal notranslate"><span class="pre">Model.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model.input_layers"><code class="docutils literal notranslate"><span class="pre">Model.input_layers</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model.response_infos"><code class="docutils literal notranslate"><span class="pre">Model.response_infos</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo"><code class="docutils literal notranslate"><span class="pre">ResponseInfo</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer.kind"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer.kind</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer.name"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer.name</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer.typename"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer.typename</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.ATTENTION"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.ATTENTION</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.AVERAGE_POOLING_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.AVERAGE_POOLING_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.AVERAGE_POOLING_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.BATCH_NORM</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.BATCH_NORM_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.BATCH_NORM_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_TRANSPOSE_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_TRANSPOSE_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_TRANSPOSE_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DENSE"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DENSE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DROPOUT</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DROPOUT_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DROPOUT_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.ELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.ELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.GRU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.GRU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LAYER_NORM"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LAYER_NORM</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LEAKY_RELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LEAKY_RELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LINEAR"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LINEAR</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LSTM"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LSTM</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.MAX_POOLING_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.MAX_POOLING_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.MAX_POOLING_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.PLACEHOLDER"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.PLACEHOLDER</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.PRELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.PRELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.RELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.RELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.RELU6"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.RELU6</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.RNN"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.RNN</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.SIGMOID"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.SIGMOID</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.SOFTMAX"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.SOFTMAX</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.TANH"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.TANH</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.UNKNOWN"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.UNKNOWN</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.dtype"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.dtype</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.layer"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.layer</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.name"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.shape"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.shape</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails"><code class="docutils literal notranslate"><span class="pre">_ModelDetails</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails.get_input_layer_responses"><code class="docutils literal notranslate"><span class="pre">_ModelDetails.get_input_layer_responses()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails.get_response_infos"><code class="docutils literal notranslate"><span class="pre">_ModelDetails.get_response_infos()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails.run_inference"><code class="docutils literal notranslate"><span class="pre">_ModelDetails.run_inference()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introspectors">Introspectors</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Introspector"><code class="docutils literal notranslate"><span class="pre">Introspector</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Introspector.introspect"><code class="docutils literal notranslate"><span class="pre">Introspector.introspect</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.multi_introspect"><code class="docutils literal notranslate"><span class="pre">multi_introspect()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities">Utilities</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.__call__"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.attach_metadata"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.attach_metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.max_samples"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.max_samples</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.shuffle"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.shuffle()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.split_dataset"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.split_dataset</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.subset"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.subset()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer"><code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer.__call__"><code class="docutils literal notranslate"><span class="pre">CachedProducer.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer.copy_to"><code class="docutils literal notranslate"><span class="pre">CachedProducer.copy_to()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer.storage_path"><code class="docutils literal notranslate"><span class="pre">CachedProducer.storage_path</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer"><code class="docutils literal notranslate"><span class="pre">ImageProducer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer.__call__"><code class="docutils literal notranslate"><span class="pre">ImageProducer.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer.field"><code class="docutils literal notranslate"><span class="pre">ImageProducer.field</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer.image_paths"><code class="docutils literal notranslate"><span class="pre">ImageProducer.image_paths</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageFormat"><code class="docutils literal notranslate"><span class="pre">ImageFormat</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageFormat.CHW"><code class="docutils literal notranslate"><span class="pre">ImageFormat.CHW</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageFormat.HWC"><code class="docutils literal notranslate"><span class="pre">ImageFormat.HWC</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.peek_first_batch"><code class="docutils literal notranslate"><span class="pre">peek_first_batch()</span></code></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="base-api">
<h1>Base API<a class="headerlink" href="#base-api" title="Permalink to this heading">#</a></h1>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#data-management-producer" id="id1">Data Management – Producer</a></p></li>
<li><p><a class="reference internal" href="#data-management-batch" id="id2">Data Management – Batch</a></p></li>
<li><p><a class="reference internal" href="#pipelines" id="id3">Pipelines</a></p></li>
<li><p><a class="reference internal" href="#introspectors" id="id4">Introspectors</a></p></li>
<li><p><a class="reference internal" href="#utilities" id="id5">Utilities</a></p></li>
</ul>
</nav>
<section id="data-management-producer">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Data Management – Producer</a><a class="headerlink" href="#data-management-producer" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Producer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">Producer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_producer.html#Producer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.Producer" title="Permalink to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">Producer</span></code> is a protocol for a function that produces instances of <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>. It is used
by dnikit to delay loading batches into memory (and processing them!) until needed by an
<a class="reference internal" href="#dnikit.base.Introspector" title="dnikit.base.Introspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Introspector</span></code></a>.</p>
<p>There are two main ways to implement a <code class="docutils literal notranslate"><span class="pre">Producer</span></code> as shown in this example:</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Implement a Producer as a free function</span>
<span class="k">def</span> <span class="nf">simple_producer</span><span class="p">(</span><span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">Batch</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="c1"># Load data (in this case random data is generated)</span>
        <span class="c1"># Make sure the first dimension is of batch_size</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">batch_size</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="c1"># yield result</span>
        <span class="k">yield</span> <span class="n">Batch</span><span class="p">({</span><span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">})</span>

<span class="c1"># Implement a Producer as a class</span>
<span class="c1"># Recommended (but not necessary): inherit from Producer.</span>
<span class="k">class</span> <span class="nc">ClassProducer</span><span class="p">(</span><span class="n">Producer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Store stateful variables here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dims</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">Batch</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="c1"># Load data (in this case generate random data)</span>
            <span class="c1"># Make sure the first dimension is of batch_size</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">batch_size</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_dims</span><span class="p">)</span>
            <span class="c1"># yield result</span>
            <span class="k">yield</span> <span class="n">Batch</span><span class="p">({</span><span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">})</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure to have a finite number of batches the <code class="docutils literal notranslate"><span class="pre">Producer</span></code> will generate, as some
<a class="reference internal" href="#dnikit.base.Introspector" title="dnikit.base.Introspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Introspector</span></code></a> instances will try to consume all the batches of the producer and
the program will stop responding indefinitely if there are infinite batches.</p>
</div>
</dd></dl>

</section>
<section id="data-management-batch">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Data Management – Batch</a><a class="headerlink" href="#data-management-batch" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">Batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_batch/_batch.html#Batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.Batch" title="Permalink to this definition">#</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">Batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_storage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BatchStorage</span></span></em><span class="sig-paren">)</span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">Batch</span></code> is DNIKit’s class to store input and output data.</p>
<p>At its most basic, a <code class="docutils literal notranslate"><span class="pre">Batch</span></code> contains as an immutable dictionary between a label and a
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>. This dictionary is stored in the <code class="docutils literal notranslate"><span class="pre">fields</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">Batch</span></code>.
Each field in <code class="docutils literal notranslate"><span class="pre">fields</span></code> is then composed of a label and a numpy array, with the label
describing the data contained in the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> (the label may be named after the
layer that produced the response or for the input data name). The numpy array contains the data
with its zero-th dimension representing the number  of elements (ie dimension 0 is <strong>always</strong>
the batch dimension).</p>
<p><a class="reference internal" href="#dnikit.base.Batch.fields" title="dnikit.base.Batch.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.fields</span></code></a> can be used just like a <code class="docutils literal notranslate"><span class="pre">Mapping[str,</span> <span class="pre">np.ndarray]</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print fields present in Batch</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

<span class="c1"># Retrieve batch data</span>
<span class="n">images</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;input_images&quot;</span><span class="p">]</span> <span class="c1"># type is numpy.ndarray</span>

<span class="c1"># Loop through elements in batch</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;field </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> has shape </span><span class="si">{</span><span class="n">v</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It’s possible to create a new <code class="docutils literal notranslate"><span class="pre">Batch</span></code> by simply passing a dictionary (or any other mapping)
from <code class="docutils literal notranslate"><span class="pre">str</span></code> to <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>. For more advanced options (like <code class="docutils literal notranslate"><span class="pre">snapshots</span></code> or
<code class="docutils literal notranslate"><span class="pre">metadata</span></code>), see below use on how to use <a class="reference internal" href="#dnikit.base.Batch.Builder" title="dnikit.base.Batch.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.Builder</span></code></a> instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_batch</span> <span class="o">=</span> <span class="n">Batch</span><span class="p">({</span><span class="s2">&quot;images&quot;</span> <span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">32</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">))})</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The number of elements (ie. the batch size) of all <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> in a <code class="docutils literal notranslate"><span class="pre">Batch</span></code>
<strong>must</strong> be the same for all arrays.</p>
</div>
<p>Lookup the number of elements in a <code class="docutils literal notranslate"><span class="pre">Batch</span></code> by calling <a class="reference internal" href="#dnikit.base.Batch.batch_size" title="dnikit.base.Batch.batch_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.batch_size</span></code></a>.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">Batch</span></code> has two extra attributes for advanced users: <a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a> and
<a class="reference internal" href="#dnikit.base.Batch.snapshots" title="dnikit.base.Batch.snapshots"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.snapshots</span></code></a>.</p>
<p><a class="reference internal" href="#dnikit.base.Batch.snapshots" title="dnikit.base.Batch.snapshots"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.snapshots</span></code></a> behaves like an immutable mapping from a label to another <code class="docutils literal notranslate"><span class="pre">Batch</span></code> and
is often used in conjunction with <a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipeline()</span></code></a> and
<a class="reference internal" href="processors.html#dnikit.processors.SnapshotSaver" title="dnikit.processors.SnapshotSaver"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnapshotSaver</span></code></a> to store the
state of a <code class="docutils literal notranslate"><span class="pre">Batch</span></code> before transforming it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if a snapshot is available in batch</span>
<span class="k">assert</span> <span class="s2">&quot;origin&quot;</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">snapshots</span>

<span class="c1"># Retrieve the snapshot</span>
<span class="n">origin_batch</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">snapshots</span><span class="p">[</span><span class="s2">&quot;origin&quot;</span><span class="p">]</span>  <span class="c1"># type is Batch</span>

<span class="c1"># origin_batch is a regular Batch and may contain different fields</span>
<span class="n">original_data</span> <span class="o">=</span> <span class="n">origin_batch</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>  <span class="c1"># type is np.ndarray</span>

<span class="c1"># The batch_size of a snapshot always matches the current batch&#39;s batch_size.</span>
<span class="k">assert</span> <span class="n">batch</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">==</span> <span class="n">origin_batch</span><span class="o">.</span><span class="n">batch_size</span>
</pre></div>
</div>
<p><a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a> is used to store metadata about certain aspects of the batch. There are
many types of metadata and three built-in metadata keys (see <a class="reference internal" href="#dnikit.base.Batch.StdKeys" title="dnikit.base.Batch.StdKeys"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.StdKeys</span></code></a>) that can
be used to attach and use metadata. Custom metadata keys can also be defined
(see <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> and <a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>). To use metadata, it’s
necessary to have both a meta key, and –if using a <a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>– a
string identifier.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Flat metadata</span>
<span class="c1"># ---------------</span>
<span class="c1"># Instantiate a Batch.MetaKey (key to store and retrieve flat metadata in a batch)</span>
<span class="n">META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Retrieve metadata</span>
<span class="n">flat_metadata</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">META_KEY</span><span class="p">]</span>  <span class="c1"># type is Sequence[int]</span>

<span class="c1"># The number of elements in metadata is always the number of elements in a batch.</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">flat_metadata</span><span class="p">)</span> <span class="o">==</span> <span class="n">batch</span><span class="o">.</span><span class="n">batch_size</span>

<span class="c1"># Dict metadata</span>
<span class="c1"># ---------------</span>
<span class="c1"># Instantiate a Batch.DictMetaKey (key to store and retrieve dict-metadata in a batch)</span>
<span class="n">DICT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">[</span><span class="nb">float</span><span class="p">](</span><span class="s2">&quot;DICT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Retrieve metadata</span>
<span class="n">dict_metadata</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">][</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>  <span class="c1"># type is Sequence[float]</span>

<span class="c1"># The number of elements in metadata is always the number of elements in a batch.</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dict_metadata</span><span class="p">)</span> <span class="o">==</span> <span class="n">batch</span><span class="o">.</span><span class="n">batch_size</span>
</pre></div>
</div>
<p>Use <a class="reference internal" href="#dnikit.base.Batch.Builder" title="dnikit.base.Batch.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.Builder</span></code></a> to make <em>new</em> instances of <code class="docutils literal notranslate"><span class="pre">Batch</span></code> with <code class="docutils literal notranslate"><span class="pre">metadata</span></code> or
<code class="docutils literal notranslate"><span class="pre">snapshots</span></code>. Note that DNIKit ships with many processors to modify metadata and snapshots
in existing Batches, such as <a class="reference internal" href="processors.html#dnikit.processors.SnapshotSaver" title="dnikit.processors.SnapshotSaver"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnapshotSaver</span></code></a> and
<a class="reference internal" href="processors.html#dnikit.processors.SnapshotRemover" title="dnikit.processors.SnapshotRemover"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnapshotRemover</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The number of elements of every metadata and every snapshot <strong>must</strong> always be the same
as the number of elements in <strong>every field</strong>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To add <code class="docutils literal notranslate"><span class="pre">snapshots</span></code> or <code class="docutils literal notranslate"><span class="pre">metadata</span></code> use <a class="reference internal" href="#dnikit.base.Batch.Builder" title="dnikit.base.Batch.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.Builder</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a><em>] </em><em>| </em><em>None</em>) – initial values for <code class="docutils literal notranslate"><span class="pre">Batch</span></code> in the form of a <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> (dictionary) from
<code class="docutils literal notranslate"><span class="pre">str</span></code> to <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>.</p></li>
<li><p><strong>_storage</strong> (<em>_BatchStorage</em>) – internal use only, do not use.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">Batch</span></code> is initialized without any data.</p></li>
<li><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – If the zero-th dimension (ie batch size) of any field, any metadata or
    any snapshot do not agree.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.batch_size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></em><a class="headerlink" href="#dnikit.base.Batch.batch_size" title="Permalink to this definition">#</a></dt>
<dd><p>Current batch size (i.e., number of samples in batch).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Batch size will be the batch size for all fields in the batch, for all fields in all
types of metadata and for all fields in all snapshots.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.elements">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">elements</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.ElementsView" title="dnikit.base._batch._batch.Batch.ElementsView"><span class="pre">ElementsView</span></a></em><a class="headerlink" href="#dnikit.base.Batch.elements" title="Permalink to this definition">#</a></dt>
<dd><p>Attribute that enables traversal of this <code class="docutils literal notranslate"><span class="pre">Batch</span></code> by element index.</p>
<p>See description of <a class="reference internal" href="#dnikit.base.Batch.ElementsView" title="dnikit.base.Batch.ElementsView"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.ElementsView</span></code></a> to check what operations are supported.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.fields">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Batch.fields" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve <code class="docutils literal notranslate"><span class="pre">fields</span></code> contained in this batch.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">field</span></code> is just a <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">mapping</span></code></a> between a
label (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) and a value (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>). Fields can images, audio samples,
temporal sequences, model responses, etc..</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.metadata">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.MetadataType" title="dnikit.base._batch._batch.Batch.MetadataType"><span class="pre">MetadataType</span></a></em><a class="headerlink" href="#dnikit.base.Batch.metadata" title="Permalink to this definition">#</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Metadata</span></code> associated with this batch.</p>
<p>See description of <a class="reference internal" href="#dnikit.base.Batch.MetadataType" title="dnikit.base.Batch.MetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code></a> to check which operations are supported.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.snapshots">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">snapshots</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><span class="pre">Batch</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Batch.snapshots" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve <code class="docutils literal notranslate"><span class="pre">snapshots</span></code> associated with this batch.</p>
<p>Snapshots are a mapping from a label to a batch (<code class="docutils literal notranslate"><span class="pre">Mapping[str,</span> <span class="pre">Batch]</span></code>).
Note that snapshots are read-only. To add snapshots to a <a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipeline()</span></code></a>
refer to <a class="reference internal" href="processors.html#dnikit.processors.SnapshotSaver" title="dnikit.processors.SnapshotSaver"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnapshotSaver</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.ElementsView">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.</span></span><span class="sig-name descname"><span class="pre">ElementsView</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_storage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.ElementsView" title="Permalink to this definition">#</a></dt>
<dd><p>Class to use <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> elements by index.</p>
<p>Do not instantiate this class directly, instead use
<a class="reference internal" href="#dnikit.base.Batch.elements" title="dnikit.base.Batch.elements"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.elements</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Batch.ElementsView</span></code> allows for:
<a class="reference internal" href="#dnikit.base.Batch.ElementsView.__iter__" title="dnikit.base.Batch.ElementsView.__iter__"><code class="xref py py-func docutils literal notranslate"><span class="pre">traversal</span></code></a>, as well as
<a class="reference internal" href="#dnikit.base.Batch.ElementsView.__getitem__" title="dnikit.base.Batch.ElementsView.__getitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">indexing</span> <span class="pre">and</span> <span class="pre">slicing</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>_storage</strong> (<em>_BatchStorage</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.ElementsView.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.ElementsView.__getitem__" title="Permalink to this definition">#</a></dt>
<dd><p>Indexing and slicing operator for <code class="docutils literal notranslate"><span class="pre">Batch.ElementsView</span></code>.</p>
<p><a class="reference internal" href="#dnikit.base.Batch.elements" title="dnikit.base.Batch.elements"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.elements</span></code></a> can also be used to directly index
one or more elements of the batch.</p>
<p>Indexing with a single <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> returns a
<a class="reference internal" href="#dnikit.base.Batch.ElementType" title="dnikit.base.Batch.ElementType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.ElementType</span></code></a> corresponding to that
element. Otherwise, indexing with a <code class="docutils literal notranslate"><span class="pre">Sequence[int]</span></code> of indices returns
a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> with the selected elements.</p>
<p>Just like with <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">lists</span></code></a>, negative items are read as starting from the end
of the elements.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">element</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">42</span><span class="p">]</span>  <span class="c1"># type is Batch.ElementType</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>  <span class="c1"># type is Batch</span>
</pre></div>
</div>
<p>Finally, <a class="reference internal" href="#dnikit.base.Batch.elements" title="dnikit.base.Batch.elements"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.elements</span></code></a> enables slicing the
batch as well. Slicing operations always return a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get elements 10, 12, 14...30 of the Batch</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># type is Batch</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>selector</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.11)"><em>slice</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – specifies how to select subsamples from Batch. See prior example.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> with specified subset, or single
<a class="reference internal" href="#dnikit.base.Batch.ElementType" title="dnikit.base.Batch.ElementType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span> <span class="pre">element</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a> | <a class="reference internal" href="#dnikit.base.Batch.ElementType" title="dnikit.base._batch._batch.Batch.ElementType"><em>ElementType</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.ElementsView.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.ElementsView.__iter__" title="Permalink to this definition">#</a></dt>
<dd><p>Iteration operator for <a class="reference internal" href="#dnikit.base.Batch.ElementsView" title="dnikit.base.Batch.ElementsView"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.ElementsView</span></code></a>.</p>
<p><a class="reference internal" href="#dnikit.base.Batch.elements" title="dnikit.base.Batch.elements"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.elements</span></code></a> can be used in a for-loop or to
get an iterator. Each element of the iteration will be of type
<a class="reference internal" href="#dnikit.base.Batch.ElementType" title="dnikit.base.Batch.ElementType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.ElementType</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">Batch</span><span class="o">.</span><span class="n">ElementType</span><span class="p">)</span>
    <span class="c1"># Can retrieve fields, snapshots &amp; metadata for a single element</span>
    <span class="n">element</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.11)"><em>Iterator</em></a>[<a class="reference internal" href="#dnikit.base.Batch.ElementType" title="dnikit.base._batch._batch.Batch.ElementType"><em>ElementType</em></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.ElementType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.</span></span><span class="sig-name descname"><span class="pre">ElementType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.ElementType" title="Permalink to this definition">#</a></dt>
<dd><p>Class to hold a single element from a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<p>This class should not be instantiated directly. Instead, receive
a <code class="docutils literal notranslate"><span class="pre">Batch.ElementType</span></code> by iterating or indexing
<a class="reference internal" href="#dnikit.base.Batch.elements" title="dnikit.base.Batch.elements"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.elements</span></code></a>.</p>
<p>Just like <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>, <code class="docutils literal notranslate"><span class="pre">Batch.ElementType</span></code> has three attributes:
<a class="reference internal" href="#dnikit.base.Batch.ElementType.fields" title="dnikit.base.Batch.ElementType.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a>,
<a class="reference internal" href="#dnikit.base.Batch.ElementType.snapshots" title="dnikit.base.Batch.ElementType.snapshots"><code class="xref py py-attr docutils literal notranslate"><span class="pre">snapshots</span></code></a>
and <a class="reference internal" href="#dnikit.base.Batch.ElementType.metadata" title="dnikit.base.Batch.ElementType.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span></code></a>.</p>
<p>The main difference is that these properties will return data about a single element in the
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_storage</strong> (<em>_BatchStorage</em>) – </p></li>
<li><p><strong>_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.ElementType.fields">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.number" title="(in NumPy v1.25)"><span class="pre">number</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Batch.ElementType.fields" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve <code class="docutils literal notranslate"><span class="pre">fields</span></code> contained in this batch element.</p>
<p>See <a class="reference internal" href="#dnikit.base.Batch.fields" title="dnikit.base.Batch.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.fields</span></code></a> for more information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The return type of this operation depends whether the underlying field
has more than one dimension. If the field, has dimensions <code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">x</span> <span class="pre">D1</span> <span class="pre">x</span> <span class="pre">..</span> <span class="pre">x</span> <span class="pre">Dn</span></code>
the return type will be a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> with shape <code class="docutils literal notranslate"><span class="pre">D1</span> <span class="pre">x</span> <span class="pre">..</span> <span class="pre">x</span> <span class="pre">Dn</span></code>,
otherwise if the field has dimensions <code class="docutils literal notranslate"><span class="pre">B</span></code> then this property will return
a <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.number" title="(in NumPy v1.25)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.number</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.ElementType.metadata">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.MetadataType.ElementType" title="dnikit.base._batch._batch.Batch.MetadataType.ElementType"><span class="pre">ElementType</span></a></em><a class="headerlink" href="#dnikit.base.Batch.ElementType.metadata" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve <code class="docutils literal notranslate"><span class="pre">metadata</span></code> contained in this batch element.</p>
<p>See <a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a> for more information.
Similarly check
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.ElementType" title="dnikit.base.Batch.MetadataType.ElementType"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code></a>
to see which operations are supported.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Batch.ElementType.snapshots">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">snapshots</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.ElementType" title="dnikit.base._batch._batch.Batch.ElementType"><span class="pre">ElementType</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Batch.ElementType.snapshots" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve <code class="docutils literal notranslate"><span class="pre">snapshots</span></code> contained in this batch element.</p>
<p>See <a class="reference internal" href="#dnikit.base.Batch.snapshots" title="dnikit.base.Batch.snapshots"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.snapshots</span></code></a> for more information.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetaKey">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.</span></span><span class="sig-name descname"><span class="pre">MetaKey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetaKey" title="Permalink to this definition">#</a></dt>
<dd><p>Class to represent different types of simple metadata in <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>,
where simple means a single metadata value per data sample for this metadata key.</p>
<p>Most of the time, <code class="docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code> will only be used to store and retrieve
metadata from a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.
See <a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a> and
<a class="reference internal" href="#dnikit.base.Batch.MetadataType" title="dnikit.base.Batch.MetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code></a> to
see how to do so.</p>
<p>Metadata keyed by <code class="docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code> will be stored as a
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> of payloads of the same length as the
<a class="reference internal" href="#dnikit.base.Batch.batch_size" title="dnikit.base.Batch.batch_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">batch</span> <span class="pre">(batch_size)</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code> can be instantiated just like a regular Python class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key_untyped</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It’s also possible to provide type annotations to inform a type checker of the payload type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key_typed</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;example2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code> is a generic type that allows static-type analyzers to keep track
the metadata payload type. For instance:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Batch.MetaKey[bool]</span></code>: signifies that the metadata will be stored as a
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sequences</span></code></a> of <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a> instances.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Batch.MetaKey[Hashable]</span></code>: signifies that the metadata will be stored as
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sequences</span></code></a> of
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Hashable" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code></a> instances.</p></li>
</ul>
<p>This payload type information is only used by static-type checkers and will not
be verified at runtime.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure the name of the <code class="docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code> is unique.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Unique name for this <code class="docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetaKey.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></em><a class="headerlink" href="#dnikit.base.Batch.MetaKey.name" title="Permalink to this definition">#</a></dt>
<dd><p>Unique name for this <code class="docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.DictMetaKey">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.</span></span><span class="sig-name descname"><span class="pre">DictMetaKey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.DictMetaKey" title="Permalink to this definition">#</a></dt>
<dd><p>Class to represent different types of dictionary metadata in
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<p>Most of the time, <code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code> will only be used to store and retrieve
metadata from a <code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code>. See <a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a>
and <a class="reference internal" href="#dnikit.base.Batch.MetadataType" title="dnikit.base.Batch.MetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code></a> to see how to do so.</p>
<p>Metadata keyed by <code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code> will be stored as a
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></a> from <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">strings</span></code></a> to
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> of payloads of the same length as the
<a class="reference internal" href="#dnikit.base.Batch.batch_size" title="dnikit.base.Batch.batch_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">batch</span> <span class="pre">(batch_size)</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code> can be instantiated just like a regular Python class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key_untyped</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It’s also possible to provide type annotations to inform a type checker of the payload type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key_typed</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;example2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">DictMetaKey</span></code> is a generic type that allows static-type analyzers to keep track
the metadata payload type. For instance:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey[int]</span></code>: signifies that the metadata will be stored as a
<code class="docutils literal notranslate"><span class="pre">Mapping[str,</span> <span class="pre">Sequence[int]]</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey[t.Union[str,</span> <span class="pre">float]]</span></code>: signifies that the metadata will be stored
as <code class="docutils literal notranslate"><span class="pre">Mapping[str,</span> <span class="pre">Sequence[t.Union[str,</span> <span class="pre">float]]</span></code>.</p></li>
</ul>
<p>This payload type information is only used by static-type checkers and will not
be verified at runtime.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure the name of the <code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code> is unique.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Unique name for this <code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.DictMetaKey.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></em><a class="headerlink" href="#dnikit.base.Batch.DictMetaKey.name" title="Permalink to this definition">#</a></dt>
<dd><p>Unique name for this <code class="docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.</span></span><span class="sig-name descname"><span class="pre">MetadataType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_storage=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType" title="Permalink to this definition">#</a></dt>
<dd><p>Class to store metadata associated with a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<p>Most likely, <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code> will only need to be used in conjunction with the
<a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span> <span class="pre">attribute</span></code></a>. from
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Batch.Metadata</span></code> supports <a class="reference internal" href="#dnikit.base.Batch.MetadataType.__getitem__" title="dnikit.base.Batch.MetadataType.__getitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">indexing</span></code></a>,
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.__contains__" title="dnikit.base.Batch.MetadataType.__contains__"><code class="xref py py-func docutils literal notranslate"><span class="pre">membership</span> <span class="pre">tests</span></code></a>, and
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.__bool__" title="dnikit.base.Batch.MetadataType.__bool__"><code class="xref py py-func docutils literal notranslate"><span class="pre">truth</span> <span class="pre">value</span> <span class="pre">tests</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>_storage</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><em>_MetaKeyTrait</em><em> | </em><em>_DictMetaKeyTrait</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> | </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>]</em><em>]</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.__bool__">
<span class="sig-name descname"><span class="pre">__bool__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.__bool__" title="Permalink to this definition">#</a></dt>
<dd><p>Truth value operator for <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code></p>
<p>It’s possible to check whether
<a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a> is empty
by requesting its truth value (will return <code class="docutils literal notranslate"><span class="pre">False</span></code> if empty, <code class="docutils literal notranslate"><span class="pre">True</span></code> otherwise):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>  <span class="c1"># False if empty, True otherwise</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.__contains__" title="Permalink to this definition">#</a></dt>
<dd><p>Membership operator for <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code>.</p>
<p>It’s possible to check whether a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a> are
present in <a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a> just as expected
in Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">FLAT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;FLAT_META_KEY&quot;</span><span class="p">)</span>
<span class="n">DICT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">[</span><span class="nb">float</span><span class="p">](</span><span class="s2">&quot;DICT_META_KEY&quot;</span><span class="p">)</span>

<span class="n">flat_metadata_present</span> <span class="o">=</span> <span class="n">FLAT_META_KEY</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span>
<span class="n">dict_metadata_present</span> <span class="o">=</span> <span class="n">DICT_META_KEY</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to see if
it exists in the batch metadata</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.__getitem__" title="Permalink to this definition">#</a></dt>
<dd><p>Indexing operator for <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code>.</p>
<p>Indexing behaves differently depending on whether a
<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a> is used.</p>
<p>If a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> is used, the metadata will be
stored as a <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> of the payloads type
indicated in the <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obtain a key for MetaKey, with payload int</span>
<span class="n">FLAT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;FLAT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Retrieve metadata associated with FLAT_META_KEY</span>
<span class="n">my_metadata</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">FLAT_META_KEY</span><span class="p">]</span>  <span class="c1"># type is Sequence[int]</span>
</pre></div>
</div>
<p>On the other hand, if a <a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>
is used, the metadata will be stored
as a mapping from <code class="docutils literal notranslate"><span class="pre">str</span></code> to a sequence of payloads (as declared in the
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obtain a key for DictMetaKey, with payload float</span>
<span class="n">DICT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">[</span><span class="nb">float</span><span class="p">](</span><span class="s2">&quot;DICT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Retrieve metadata associated with DICT_META_KEY</span>
<span class="n">my_metadata</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">]</span>  <span class="c1"># type is Mapping[str, Sequence[float]]</span>

<span class="c1"># Retrieve a specific entry in metadata</span>
<span class="n">field_metadata</span> <span class="o">=</span> <span class="n">my_metadata</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>  <span class="c1"># type is Sequence[float]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to use
metadata in the batch</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.keys" title="Permalink to this definition">#</a></dt>
<dd><p>Return all instances of <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> and
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a> contained
within this instance.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaKeys</span></code></a> and
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictMetaKeys</span></code></a>
returned will be <strong>type-erased</strong> which means a type checker will not understand
the type of the payload. It’s recommended to use this method for debugging purposes
or adding the type information back with <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.cast" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.cast()</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a view of each <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> and
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a> contained in
the metadata.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.KeysView" title="(in Python v3.11)"><em>KeysView</em></a>[<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a> | <a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.ElementType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.MetadataType.</span></span><span class="sig-name descname"><span class="pre">ElementType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.ElementType" title="Permalink to this definition">#</a></dt>
<dd><p>Class to store metadata associated with a single
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> element.</p>
<p>As a user, <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code> will really only be encountered through
the <a class="reference internal" href="#dnikit.base.Batch.ElementType.metadata" title="dnikit.base.Batch.ElementType.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span> <span class="pre">attribute</span></code></a> of
<a class="reference internal" href="#dnikit.base.Batch.ElementType" title="dnikit.base.Batch.ElementType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.ElementType</span></code></a> which itself will
likely only be used through <a class="reference internal" href="#dnikit.base.Batch.elements" title="dnikit.base.Batch.elements"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.elements</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code> supports the same
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.ElementType.__getitem__" title="dnikit.base.Batch.MetadataType.ElementType.__getitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">indexing</span></code></a>,
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.ElementType.__contains__" title="dnikit.base.Batch.MetadataType.ElementType.__contains__"><code class="xref py py-func docutils literal notranslate"><span class="pre">membership</span> <span class="pre">tests</span></code></a> and
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.ElementType.__bool__" title="dnikit.base.Batch.MetadataType.ElementType.__bool__"><code class="xref py py-func docutils literal notranslate"><span class="pre">truth</span> <span class="pre">value</span> <span class="pre">tests</span></code></a> as
<a class="reference internal" href="#dnikit.base.Batch.MetadataType" title="dnikit.base.Batch.MetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code></a>.</p>
<p>The main difference is that where
<a class="reference internal" href="#dnikit.base.Batch.MetadataType" title="dnikit.base.Batch.MetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code></a> returns a sequence of
elements, <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code> will return a single item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_storage</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><em>_MetaKeyTrait</em><em> | </em><em>_DictMetaKeyTrait</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> | </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.ElementType.__bool__">
<span class="sig-name descname"><span class="pre">__bool__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.ElementType.__bool__" title="Permalink to this definition">#</a></dt>
<dd><p>Truth value operator for <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code></p>
<p>It’s possible to check whether an instance of
<code class="docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code> is empty by
requesting its truth value (will return <code class="docutils literal notranslate"><span class="pre">False</span></code> if empty, <code class="docutils literal notranslate"><span class="pre">True</span></code> otherwise):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span><span class="p">(</span><span class="n">batch_element</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>  <span class="c1"># False if empty, True otherwise</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.ElementType.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.ElementType.__contains__" title="Permalink to this definition">#</a></dt>
<dd><p>Membership operator for <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code>.</p>
<p>Behaves the same as the
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.__contains__" title="dnikit.base.Batch.MetadataType.__contains__"><code class="xref py py-func docutils literal notranslate"><span class="pre">Batch.MetadataType</span> <span class="pre">membership</span></code></a>
operator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flat_meta_key_present</span> <span class="o">=</span> <span class="n">FLAT_META_KEY</span> <span class="ow">in</span> <span class="n">batch_element</span><span class="o">.</span><span class="n">metadata</span>
<span class="n">dict_meta_key_present</span> <span class="o">=</span> <span class="n">DICT_META_KEY</span> <span class="ow">in</span> <span class="n">batch_element</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to see if
it exists in the batch element’s metadata</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.MetadataType.ElementType.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">meta_key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.MetadataType.ElementType.__getitem__" title="Permalink to this definition">#</a></dt>
<dd><p>Indexing operator for <code class="docutils literal notranslate"><span class="pre">Batch.MetadataType.ElementType</span></code>.</p>
<p>Behaves the same as
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.__getitem__" title="dnikit.base.Batch.MetadataType.__getitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">Batch.MetadataType's</span> <span class="pre">indexing</span></code></a>
operator, but returns a single instance of the payload rather than a sequence.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Instantiate a MetaKey and  DictMetaKey</span>
<span class="n">FLAT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;FLAT_META_KEY&quot;</span><span class="p">)</span>

<span class="n">DICT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">[</span><span class="nb">float</span><span class="p">](</span><span class="s2">&quot;DICT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Get a single batch_element</span>
<span class="n">batch_element</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Retrieve metadata</span>
<span class="n">simple_metadata</span> <span class="o">=</span> <span class="n">batch_element</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">SIMPLE_META_KEY</span><span class="p">]</span>
<span class="c1"># type is int</span>
<span class="n">dict_metadata</span> <span class="o">=</span> <span class="n">batch_element</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">]</span>
<span class="c1"># type is Mapping[str, float]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to use
metadata in the batch element</p></li>
<li><p><strong>meta_key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.</span></span><span class="sig-name descname"><span class="pre">Builder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.Builder" title="Permalink to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">Batch.Builder</span></code> is a helper class to aid in the creation of new
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> instances.</p>
<p>From a high-level perspective, <code class="docutils literal notranslate"><span class="pre">Batch.Builder</span></code> has similar capabilities to
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>, but all its attributes are <strong>mutable</strong>.</p>
<p>That means that it’s possible to directly add or modify <code class="docutils literal notranslate"><span class="pre">fields</span></code> in the builder:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a new builder</span>
<span class="n">builder</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">Builder</span><span class="p">()</span>

<span class="c1"># Add a new field</span>
<span class="n">builder</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="c1"># Modify existing field</span>
<span class="n">builder</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">][:,</span> <span class="p">:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="c1"># Remove field</span>
<span class="k">del</span> <span class="n">builder</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Similarly, it’s possible to directly add or modify <code class="docutils literal notranslate"><span class="pre">snapshots</span></code> or <code class="docutils literal notranslate"><span class="pre">metadata</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove an existing snapshot</span>
<span class="k">del</span> <span class="n">builder</span><span class="o">.</span><span class="n">snapshots</span><span class="p">[</span><span class="s2">&quot;origin&quot;</span><span class="p">]</span>

<span class="c1"># Add a new snapshot</span>
<span class="n">builder</span><span class="o">.</span><span class="n">snapshots</span><span class="p">[</span><span class="s2">&quot;snapshot&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">previous_batch</span>

<span class="c1"># Add metadata</span>
<span class="n">FLAT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;FLAT_META_KEY&quot;</span><span class="p">)</span>
<span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">FLAT_META_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">32</span><span class="p">))</span>
</pre></div>
</div>
<p>After modifying <code class="docutils literal notranslate"><span class="pre">Batch.Builder</span></code>, to obtain a fully-baked
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>,
call <a class="reference internal" href="#dnikit.base.Batch.Builder.make_batch" title="dnikit.base.Batch.Builder.make_batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_batch()</span></code></a>.</p>
<p><strong>Note:</strong> the resulting <code class="docutils literal notranslate"><span class="pre">Batch</span></code> must have non-empty <code class="docutils literal notranslate"><span class="pre">fields</span></code> or <code class="docutils literal notranslate"><span class="pre">metadata</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.11)"><em>MutableMapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a><em>]</em>) – <strong>[optional]</strong> initial values for this <code class="docutils literal notranslate"><span class="pre">Batch.Builder</span></code>.</p></li>
<li><p><strong>base</strong> (<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><em>Batch</em></a><em> | </em><em>None</em>) – <strong>[keyword arg, optional]</strong> <code class="docutils literal notranslate"><span class="pre">Batch</span></code> instance whose fields, metadata
and snapshots will be copied into this <code class="docutils literal notranslate"><span class="pre">Batch.Builder</span></code>. This is useful to modify
only a few aspects of a <code class="docutils literal notranslate"><span class="pre">Batch</span></code> but leave most of it intact. Using this
argument alongside <code class="docutils literal notranslate"><span class="pre">fields</span></code> is not allowed.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.11)"><span class="pre">MutableMapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Batch.Builder.fields" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve and set <code class="docutils literal notranslate"><span class="pre">fields</span></code> associated with this builder.</p>
<p>This is a mutable version of <a class="reference internal" href="#dnikit.base.Batch.fields" title="dnikit.base.Batch.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.fields</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.make_batch">
<span class="sig-name descname"><span class="pre">make_batch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.Builder.make_batch" title="Permalink to this definition">#</a></dt>
<dd><p>Return a fully-baked (and immutable) <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> with the same
data, metadata and snapshots as this instance of <code class="docutils literal notranslate"><span class="pre">Batch.Builder</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType" title="dnikit.base._batch._batch.Batch.Builder.MutableMetadataType"><span class="pre">MutableMetadataType</span></a></em><a class="headerlink" href="#dnikit.base.Batch.Builder.metadata" title="Permalink to this definition">#</a></dt>
<dd><p><a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType" title="dnikit.base.Batch.Builder.MutableMetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">metadata</span></code></a>
associated with this builder.</p>
<p>This is a mutable version of <a class="reference internal" href="#dnikit.base.Batch.metadata" title="dnikit.base.Batch.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a>. See
<a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType" title="dnikit.base.Batch.Builder.MutableMetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code></a>
for a description of operation supported.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.snapshots">
<span class="sig-name descname"><span class="pre">snapshots</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.11)"><span class="pre">MutableMapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><span class="pre">Batch</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Batch.Builder.snapshots" title="Permalink to this definition">#</a></dt>
<dd><p>Retrieve and set <code class="docutils literal notranslate"><span class="pre">snapshots</span></code> associated with this builder.</p>
<p>This is a mutable version of <a class="reference internal" href="#dnikit.base.Batch.snapshots" title="dnikit.base.Batch.snapshots"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.snapshots</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.StdKeys">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.</span></span><span class="sig-name descname"><span class="pre">StdKeys</span></span><a class="headerlink" href="#dnikit.base.Batch.StdKeys" title="Permalink to this definition">#</a></dt>
<dd><p>Standard metadata keys that are useful across many domains.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.StdKeys.IDENTIFIER">
<span class="sig-name descname"><span class="pre">IDENTIFIER</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><span class="pre">MetaKey</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.11)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">Batch.MetaKey(name='dnikit.base.Batch.StdKeys.identifier')</span></em><a class="headerlink" href="#dnikit.base.Batch.StdKeys.IDENTIFIER" title="Permalink to this definition">#</a></dt>
<dd><p>Metadata key that uniquely identifies a data element.  This should only be
used to provide a unique identifier for each data element.  Code that
needs to store per-element data can use this value as a key, for
example in a dictionary.</p>
<p>Use case 1:</p>
<p>CIFAR image data is loaded from numpy arrays.  It would be reasonable
to use the index into those arrays as the <code class="docutils literal notranslate"><span class="pre">IDENTIFIER</span></code>.</p>
<p>Use case 2:</p>
<p>Images are loaded from files.  As long as files are not duplicated
in the elements, the path to the file would make a good identifier.
Note that it is better to use the path than the filename (the last
part of the path) because that may not be unique enough.  Consider
also storing the path in <a class="reference internal" href="#dnikit.base.Batch.StdKeys.PATH" title="dnikit.base.Batch.StdKeys.PATH"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PATH</span></code></a>.</p>
<p>Use case 3:</p>
<p>Face detection use cases might have a file and a crop rect.  The file
may be used multiple times: once for each face.  In this case using
a tuple to hold the path and crop rect will provide a unique identifier.
Other metadata fields should be used if it’s also necessary to use a
crop rect or filename apart from the unique identifier (in particular
do not try to decompose the <code class="docutils literal notranslate"><span class="pre">IDENTIFIER</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">Batch</span><span class="o">.</span><span class="n">StdKeys</span><span class="o">.</span><span class="n">IDENTIFIER</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">crop_x</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">crop_y</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">crop_w</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">crop_h</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dataset</span>
<span class="p">]</span>
<span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">Batch</span><span class="o">.</span><span class="n">StdKeys</span><span class="o">.</span><span class="n">PATH</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">d</span><span class="o">.</span><span class="n">path</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dataset</span>
<span class="p">]</span>

<span class="c1"># probably a custom key for the crop rect as well</span>
<span class="n">CROP</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]](</span><span class="s2">&quot;crop&quot;</span><span class="p">)</span>
<span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">CROP</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">crop_x</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">crop_y</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">crop_w</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">crop_h</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dataset</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Use case 4:</p>
<p>If there isn’t any suitable natural identifier, a UUID or sequence value (int)
is a good way to go.</p>
<p>The built in <a class="reference internal" href="#dnikit.base.ImageProducer" title="dnikit.base.ImageProducer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageProducer</span></code></a> can provide both
<code class="docutils literal notranslate"><span class="pre">IDENTIFIER</span></code> and <a class="reference internal" href="#dnikit.base.Batch.StdKeys.PATH" title="dnikit.base.Batch.StdKeys.PATH"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PATH</span></code></a>.  The built in <a class="reference internal" href="processors.html#dnikit.processors.Cacher" title="dnikit.processors.Cacher"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cacher</span></code></a>
can provide a unique sequence <code class="docutils literal notranslate"><span class="pre">IDENTIFIER</span></code> for any producers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.StdKeys.LABELS">
<span class="sig-name descname"><span class="pre">LABELS</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><span class="pre">DictMetaKey</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.11)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">Batch.DictMetaKey(name='dnikit.base.Batch.StdKeys.labels')</span></em><a class="headerlink" href="#dnikit.base.Batch.StdKeys.LABELS" title="Permalink to this definition">#</a></dt>
<dd><p>Metadata key to set of labels. Maps label_category_name (e.g. shape) to label (e.g. square).</p>
<p class="rubric">Example</p>
<p>For example, samples may be labeled across multiple dimensions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">Batch</span><span class="o">.</span><span class="n">StdKeys</span><span class="o">.</span><span class="n">LABELS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="s2">&quot;triangle&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">],</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">],</span>
<span class="p">}</span>

<span class="n">labels_shapes</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">Batch</span><span class="o">.</span><span class="n">StdKeys</span><span class="o">.</span><span class="n">LABELS</span><span class="p">][</span><span class="s2">&quot;shape&quot;</span><span class="p">]</span>
<span class="n">labels_colors</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">Batch</span><span class="o">.</span><span class="n">StdKeys</span><span class="o">.</span><span class="n">LABELS</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Batch.StdKeys.PATH">
<span class="sig-name descname"><span class="pre">PATH</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><span class="pre">MetaKey</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><span class="pre">Path</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">Batch.MetaKey(name='dnikit.base.Batch.StdKeys.path')</span></em><a class="headerlink" href="#dnikit.base.Batch.StdKeys.PATH" title="Permalink to this definition">#</a></dt>
<dd><p>Metadata key that identifies the path (either a <code class="docutils literal notranslate"><span class="pre">str</span></code> or a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>)
that the element represents.  This can be used by a
<a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a>
to load data, or simply be used to associate results with an input file.</p>
<p>The built in <a class="reference internal" href="#dnikit.base.ImageProducer" title="dnikit.base.ImageProducer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageProducer</span></code></a> can provide both
<a class="reference internal" href="#dnikit.base.Batch.StdKeys.IDENTIFIER" title="dnikit.base.Batch.StdKeys.IDENTIFIER"><code class="xref py py-attr docutils literal notranslate"><span class="pre">IDENTIFIER</span></code></a> and <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.MutableMetadataType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.Batch.Builder.</span></span><span class="sig-name descname"><span class="pre">MutableMetadataType</span></span><a class="headerlink" href="#dnikit.base.Batch.Builder.MutableMetadataType" title="Permalink to this definition">#</a></dt>
<dd><p>Class to store <strong>mutable</strong> metadata associated with a
<a class="reference internal" href="#dnikit.base.Batch.Builder" title="dnikit.base.Batch.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.Builder</span></code></a>.</p>
<p>Most likely <code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code> will only have to be used in
conjunction with the <a class="reference internal" href="#dnikit.base.Batch.Builder.metadata" title="dnikit.base.Batch.Builder.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span> <span class="pre">attribute</span></code></a>
from <a class="reference internal" href="#dnikit.base.Batch.Builder" title="dnikit.base.Batch.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.Builder</span></code></a>.</p>
<p>Just like <a class="reference internal" href="#dnikit.base.Batch.MetadataType" title="dnikit.base.Batch.MetadataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetadataType</span></code></a>,
<code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code> supports
<a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType.__getitem__" title="dnikit.base.Batch.Builder.MutableMetadataType.__getitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">indexing</span></code></a>,
<a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType.__contains__" title="dnikit.base.Batch.Builder.MutableMetadataType.__contains__"><code class="xref py py-func docutils literal notranslate"><span class="pre">membership</span> <span class="pre">tests</span></code></a>,
and <a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType.__bool__" title="dnikit.base.Batch.Builder.MutableMetadataType.__bool__"><code class="xref py py-func docutils literal notranslate"><span class="pre">truth</span> <span class="pre">value</span> <span class="pre">tests</span></code></a>.
It also adds the ability to
<a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType.__setitem__" title="dnikit.base.Batch.Builder.MutableMetadataType.__setitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">modify</span> <span class="pre">values</span></code></a> and
<a class="reference internal" href="#dnikit.base.Batch.Builder.MutableMetadataType.__delitem__" title="dnikit.base.Batch.Builder.MutableMetadataType.__delitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">delete</span> <span class="pre">items</span></code></a>.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.MutableMetadataType.__bool__">
<span class="sig-name descname"><span class="pre">__bool__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.Builder.MutableMetadataType.__bool__" title="Permalink to this definition">#</a></dt>
<dd><p>Truth value operator for <code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code></p>
<p>It’s possible to whether an instance of
<code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code> is empty
by requesting its truth value (will return <code class="docutils literal notranslate"><span class="pre">False</span></code> if empty, <code class="docutils literal notranslate"><span class="pre">True</span></code> otherwise):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span><span class="p">(</span><span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>  <span class="c1"># False if empty, True otherwise</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.MutableMetadataType.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.Builder.MutableMetadataType.__contains__" title="Permalink to this definition">#</a></dt>
<dd><p>Membership operator for <code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code>.</p>
<p>Behaves the same as the
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.__contains__" title="dnikit.base.Batch.MetadataType.__contains__"><code class="xref py py-func docutils literal notranslate"><span class="pre">Batch.MetadataType</span> <span class="pre">membership</span></code></a>
operator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flat_meta_key_present</span> <span class="o">=</span> <span class="n">FLAT_META_KEY</span> <span class="ow">in</span> <span class="n">builder</span><span class="o">.</span><span class="n">metadata</span>
<span class="n">dict_meta_key_present</span> <span class="o">=</span> <span class="n">DICT_META_KEY</span> <span class="ow">in</span> <span class="n">builder</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to see if
it exists in the batch metadata</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.MutableMetadataType.__delitem__">
<span class="sig-name descname"><span class="pre">__delitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.Builder.MutableMetadataType.__delitem__" title="Permalink to this definition">#</a></dt>
<dd><p>Deletion operator for <code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code>.</p>
<p>The <cite>del</cite> keyword can be used in combination with normal indexing rules to delete
any metadata elements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Delete FLAT_META_KEY</span>
<span class="k">del</span> <span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">FLAT_META_KEY</span><span class="p">]</span>
<span class="c1"># Delete DICT_META_KEY</span>
<span class="k">del</span> <span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">]</span>
<span class="c1"># Delete a specific entry from a DICT_META_KEY</span>
<span class="k">del</span> <span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">][</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to indicate
which of the batch metadata to delete</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.MutableMetadataType.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.Builder.MutableMetadataType.__getitem__" title="Permalink to this definition">#</a></dt>
<dd><p>Indexing operator for <code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code>.</p>
<p>Behaves the same as the
<a class="reference internal" href="#dnikit.base.Batch.MetadataType.__getitem__" title="dnikit.base.Batch.MetadataType.__getitem__"><code class="xref py py-func docutils literal notranslate"><span class="pre">Batch.MetadataType</span> <span class="pre">indexing</span></code></a>
operator (but returning mutable versions of the containers).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Instantiate a MetaKey, ...</span>
<span class="n">FLAT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;FLAT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># ... and a DictMetaKey</span>
<span class="n">DICT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">[</span><span class="nb">float</span><span class="p">](</span><span class="s2">&quot;DICT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Retrieve metadata</span>
<span class="n">flat_metadata</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">FLAT_META_KEY</span><span class="p">]</span>
<span class="c1"># type is MutableSequence[int]</span>
<span class="n">dict_metadata</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">]</span>
<span class="c1"># type is MutableMapping[str, MutableSequence[int]]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to use
metadata in the batch</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Batch.Builder.MutableMetadataType.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dnikit.base.Batch.Builder.MutableMetadataType.__setitem__" title="Permalink to this definition">#</a></dt>
<dd><p>Mutation operator for <code class="docutils literal notranslate"><span class="pre">Batch.Builder.MutableMetadataType</span></code>.</p>
<p>The behavior of metadata mutation varies depending whether a
<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a> is used.</p>
<p>Metadata keyed by
<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> can be set with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Instantiate a MetaKey</span>
<span class="n">FLAT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">MetaKey</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="s2">&quot;FLAT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Set metadata for FLAT_META_KEY</span>
<span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">FLAT_META_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>If using <a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>,
the metadata can be set like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># And a DictMetaKey</span>
<span class="n">DICT_META_KEY</span> <span class="o">=</span> <span class="n">Batch</span><span class="o">.</span><span class="n">DictMetaKey</span><span class="p">[</span><span class="nb">float</span><span class="p">](</span><span class="s2">&quot;DICT_META_KEY&quot;</span><span class="p">)</span>

<span class="c1"># Set all keys and values for a DICT_META_KEY</span>
<span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;digits&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="s2">&quot;tens&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.</span><span class="p">,</span> <span class="mf">20.</span><span class="p">,</span> <span class="mf">30.</span><span class="p">,</span> <span class="mf">40.</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
<span class="c1"># Set a particular key for DICT_META_KEY</span>
<span class="n">builder</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">DICT_META_KEY</span><span class="p">][</span><span class="s2">&quot;hundreds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">100.</span><span class="p">,</span> <span class="mf">200.</span><span class="p">,</span> <span class="mf">300.</span><span class="p">,</span> <span class="mf">400.</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base._batch._batch.Batch.MetaKey"><em>MetaKey</em></a><em> | </em><a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base._batch._batch.Batch.DictMetaKey"><em>DictMetaKey</em></a>) – a <a class="reference internal" href="#dnikit.base.Batch.MetaKey" title="dnikit.base.Batch.MetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.MetaKey</span></code></a> or a
<a class="reference internal" href="#dnikit.base.Batch.DictMetaKey" title="dnikit.base.Batch.DictMetaKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.DictMetaKey</span></code></a>, to indicate
what key to list the metadata under</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>) – metadata value to be used with <code class="docutils literal notranslate"><span class="pre">key</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="pipelines">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Pipelines</a><a class="headerlink" href="#pipelines" title="Permalink to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="dnikit.base.pipeline">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">producer</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">stages</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_pipeline.html#pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>Combine a <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> with one or more <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a> (normally <a class="reference internal" href="#dnikit.base.Model" title="dnikit.base.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">Model</span></code></a> or
<a class="reference internal" href="processors.html#dnikit.processors.Processor" title="dnikit.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Processor</span></code></a>) to obtain a new <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> which
will yield <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> from the input <code class="docutils literal notranslate"><span class="pre">producer</span></code> transformed the specified <code class="docutils literal notranslate"><span class="pre">stages</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>producer</strong> (<a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><em>Producer</em></a>) – input <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> which will be used to create initial batches.</p></li>
<li><p><strong>stages</strong> (<a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base._pipeline.PipelineStage"><em>PipelineStage</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Collection" title="(in Python v3.11)"><em>Collection</em></a><em>[</em><a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base._pipeline.PipelineStage"><em>PipelineStage</em></a><em>]</em>) – one or more <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a> that determine how to transform the batches
produced by the input <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>. Elements of <cite>stages</cite> may also be
tuples or lists of <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStages</span></code></a> and will be
flattened automatically.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><em>Producer</em></a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">in_producer</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># Instantiate a valid input Producer</span>
<span class="n">model</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># Instantiate a model</span>
<span class="n">postprocessor</span> <span class="o">=</span> <span class="n">Pooler</span><span class="p">(</span><span class="n">dim</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">Pooler</span><span class="o">.</span><span class="n">Method</span><span class="o">.</span><span class="n">MAX</span><span class="p">)</span> <span class="c1"># create a max-pooler</span>

<span class="c1"># Combine in_producer, model and postprocessor</span>
<span class="n">out_producer</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="n">in_producer</span><span class="p">,</span> <span class="n">model</span><span class="p">(),</span> <span class="n">postprocessor</span><span class="p">)</span>

<span class="c1"># Get a batch with 32 elements from the pipelined producer</span>
<span class="n">batch</span> <span class="o">=</span> <span class="n">peek_first_batch</span><span class="p">(</span><span class="n">out_producer</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
<span class="c1"># Batch now contains the max-pooled responses resulting from running inference on model</span>
<span class="c1"># with the batches produced by in_producer.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.PipelineStage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">PipelineStage</span></span><a class="reference internal" href="../../_modules/dnikit/base/_pipeline.html#PipelineStage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.PipelineStage" title="Permalink to this definition">#</a></dt>
<dd><p>Protocol used to <a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipeline()</span></code></a> operations (such as model inference, pre-processing and
post-processing).</p>
<p><a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a> instances allow for declare how to transform a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> while
delaying the actual computation until an algorithm’s introspection function is called.</p>
<p>Notable subclasses include <a class="reference internal" href="#dnikit.base.Model" title="dnikit.base.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">dnikit.base.Model</span></code></a> and <a class="reference internal" href="processors.html#dnikit.processors.Processor" title="dnikit.processors.Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">dnikit.processors.Processor</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to implement a custom <code class="docutils literal notranslate"><span class="pre">PipelineStage</span></code>,
inherit from this class and implement <a class="reference internal" href="#dnikit.base.PipelineStage._get_batch_processor" title="dnikit.base.PipelineStage._get_batch_processor"><code class="xref py py-func docutils literal notranslate"><span class="pre">_get_batch_processor()</span></code></a> and,
in rare circumstances, <a class="reference internal" href="#dnikit.base.PipelineStage._pipeline" title="dnikit.base.PipelineStage._pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">_pipeline()</span></code></a>.
Refer to the documentation of those methods for more information.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.PipelineStage._get_batch_processor">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_get_batch_processor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_pipeline.html#PipelineStage._get_batch_processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.PipelineStage._get_batch_processor" title="Permalink to this definition">#</a></dt>
<dd><p>Get a function that will process/transform each of the batches produced by a
<a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>.</p>
<p>The batch processor must not modify its input <code class="docutils literal notranslate"><span class="pre">batch</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The batch processor MUST be stateless. That is, its outputs must only depend on the
input <cite>batch</cite>.
If the <code class="docutils literal notranslate"><span class="pre">PipelineStage</span></code> has some state, the best way to ensure the batch processor
is stateless is to make a local copy of all mutable variables.
See examples below for details on how to do this.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <a class="reference internal" href="#dnikit.base.PipelineStage._pipeline" title="dnikit.base.PipelineStage._pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">_pipeline()</span></code></a> is overridden, an empty implementation (<code class="docutils literal notranslate"><span class="pre">pass</span></code>) may be enough
for <a class="reference internal" href="#dnikit.base.PipelineStage._get_batch_processor" title="dnikit.base.PipelineStage._get_batch_processor"><code class="xref py py-func docutils literal notranslate"><span class="pre">_get_batch_processor()</span></code></a> as that is the only caller for this function.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Implement a stateless PipelineStage</span>
<span class="k">class</span> <span class="nc">Simple</span><span class="p">(</span><span class="n">PipelineStage</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_get_batch_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Batch</span><span class="p">],</span> <span class="n">Batch</span><span class="p">]:</span>
        <span class="c1"># Define the function that will process the batches</span>
        <span class="k">def</span> <span class="nf">simple_batch_operation</span><span class="p">(</span><span class="n">batch</span><span class="p">:</span> <span class="n">Batch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Batch</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;result&quot;</span> <span class="p">:</span> <span class="n">batch</span><span class="p">[</span><span class="s2">&quot;input&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Batch</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># Return batch operation</span>
        <span class="k">return</span> <span class="n">simple_batch_operation</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Implement a stateful PipelineStage</span>
<span class="k">class</span> <span class="nc">Stateful</span><span class="p">(</span><span class="n">PipelineStage</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="c1"># Note that users may change the value of this variable *after* pipelining</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="n">factor</span>

    <span class="k">def</span> <span class="nf">_get_batch_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Batch</span><span class="p">],</span> <span class="n">Batch</span><span class="p">]:</span>
        <span class="c1"># First, get a local copy of factor.</span>
        <span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="c1"># Then, take advantage of Python closures to define the batch operation.</span>
        <span class="k">def</span> <span class="nf">batch_operation</span><span class="p">(</span><span class="n">batch</span><span class="p">:</span> <span class="n">Batch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Batch</span><span class="p">:</span>
            <span class="c1"># Notice even if users change self.factor the result of this function</span>
            <span class="c1"># depends only on its input</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;result&quot;</span> <span class="p">:</span> <span class="n">batch</span><span class="p">[</span><span class="s2">&quot;input&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">factor</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Batch</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># Return batch operation</span>
        <span class="k">return</span> <span class="n">batch_operation</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a>[[<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a>], <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.PipelineStage._pipeline">
<span class="sig-name descname"><span class="pre">_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">producer</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_pipeline.html#PipelineStage._pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.PipelineStage._pipeline" title="Permalink to this definition">#</a></dt>
<dd><p>Create a new <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> which will yield instances <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> with the
appropriate processing/transformations applied.</p>
<p>By default, the <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> returned by this function will obtain a
batch processor using <a class="reference internal" href="#dnikit.base.PipelineStage._get_batch_processor" title="dnikit.base.PipelineStage._get_batch_processor"><code class="xref py py-func docutils literal notranslate"><span class="pre">_get_batch_processor()</span></code></a> and apply it to every batch
produced by the input <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>producer</strong> (<a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><em>Producer</em></a>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><em>Producer</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Model">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">Model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_details</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_model.html#Model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.Model" title="Permalink to this definition">#</a></dt>
<dd><p>Abstraction for deep learning models.</p>
<p>A dnikit <code class="docutils literal notranslate"><span class="pre">Model</span></code> is in charge of generating a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of responses when fed
an input <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<p>In order to perform inference with an instance of <code class="docutils literal notranslate"><span class="pre">Model</span></code>, one must call it in a
<a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipeline()</span></code></a>, feeding it batches from a data <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>.
Note that dnikit avoids processing any data until an introspection algorithm needs it.
See the example below for more information.</p>
<p>More specifically, calling a <code class="docutils literal notranslate"><span class="pre">Model</span></code> instance
produces a <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a> for use in a <a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipeline()</span></code></a>.
It’s common to pass the model one or more requested responses (i.e., layers) to
obtain when performing inference. See <a class="reference internal" href="#dnikit.base.Model.__call__" title="dnikit.base.Model.__call__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__call__()</span></code></a> for more information.</p>
<p>Note that for a <code class="docutils literal notranslate"><span class="pre">Model</span></code> to perform inference on a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>, it must be able to link up
the <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> <a class="reference internal" href="#dnikit.base.Batch.fields" title="dnikit.base.Batch.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">field(s)</span></code></a> to the expected input field(s)
of the model. If a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>
and a <code class="docutils literal notranslate"><span class="pre">Model</span></code> have only a single input field, this linking is attempted automatically.
However, if the <code class="docutils literal notranslate"><span class="pre">Model</span></code> has two or more inputs, the number and name of the input
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> fields <strong>must match</strong> the expected input field names for the model exactly.
For instance, a TensorFlow model might expect two fields called <code class="docutils literal notranslate"><span class="pre">input_1</span></code> and <code class="docutils literal notranslate"><span class="pre">input_2</span></code>.
The <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> that is fed into the model must have exactly two
<a class="reference internal" href="#dnikit.base.Batch.fields" title="dnikit.base.Batch.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a> with the
same names and expected NumPy shapes. DNIKit has two helper methods to assist with modifying
a <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch's</span></code></a> <a class="reference internal" href="#dnikit.base.Batch.fields" title="dnikit.base.Batch.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a>:
<a class="reference internal" href="processors.html#dnikit.processors.FieldRenamer" title="dnikit.processors.FieldRenamer"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldRenamer</span></code></a> and
<a class="reference internal" href="processors.html#dnikit.processors.FieldRemover" title="dnikit.processors.FieldRemover"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldRemover</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not instantiate this class directly, either use one of the methods provided by
dnikit_tensorflow, or, to implement a custom <code class="docutils literal notranslate"><span class="pre">Model</span></code>,
it’s recommended to instead create a custom a <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> that generates model
responses,
or follow the <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a> protocol. If it’s necessary to create a new
<code class="docutils literal notranslate"><span class="pre">Model</span></code> for DNIKit, a custom
<a class="reference internal" href="#dnikit.base._model._ModelDetails" title="dnikit.base._model._ModelDetails"><code class="xref py py-class docutils literal notranslate"><span class="pre">_ModelDetails</span></code></a> must be implemented.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_producer</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># Instantiate a valid Producer with input data</span>
<span class="n">model</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># Instantiate a model with dnikit_tensorflow, etc...</span>
<span class="n">requested_responses</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;conv2d/0&quot;</span><span class="p">,</span> <span class="s2">&quot;conv2d/1&quot;</span><span class="p">]</span>

<span class="c1"># Pipeline model with producer</span>
<span class="n">response_producer</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span>
    <span class="n">data_producer</span><span class="p">,</span>
    <span class="n">model</span><span class="p">(</span><span class="n">requested_responses</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Until now, no computation has occurred.</span>
<span class="c1"># The following call will create a an input batch with 128 elements (using</span>
<span class="c1"># data_producer) feed it as input to the model, run inference and collect the &quot;conv2d/0&quot;</span>
<span class="c1"># and &quot;conv2d/1&quot; responses. This process is repeated for every iteration in the loop.</span>
<span class="n">batch</span> <span class="o">=</span> <span class="n">peek_first_batch</span><span class="p">(</span><span class="n">response_producer</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="c1"># Do processing with batch</span>
<span class="c1"># frozenset(batch.keys()) == {&quot;conv2d/0&quot;, &quot;conv2d/1&quot;}</span>
<span class="c1"># batch.batch_size = 128</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>_details</strong> (<a class="reference internal" href="#dnikit.base._model._ModelDetails" title="dnikit.base._model._ModelDetails"><em>_ModelDetails</em></a>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.Model.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requested_responses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_model.html#Model.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.Model.__call__" title="Permalink to this definition">#</a></dt>
<dd><p>Used to obtain a <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a>, which is necessary to run inference
on input <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>requested_responses</strong> (<em>None</em><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Collection" title="(in Python v3.11)"><em>Collection</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – Determines which outputs from this model will be present in the
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> output by the resulting <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a>.
The argument represents the name(s) of a single response or a collection of
responses or <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default).
If <code class="docutils literal notranslate"><span class="pre">None</span></code> is used, all possible responses in the model will be selected (which may
be expensive to compute!).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base.PipelineStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineStage</span></code></a> that can be used with <a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipeline()</span></code></a> to run inference with
the loaded <code class="docutils literal notranslate"><span class="pre">Model</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#dnikit.base.PipelineStage" title="dnikit.base._pipeline.PipelineStage"><em>PipelineStage</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Model.input_layers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">input_layers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base._response_info.ResponseInfo"><span class="pre">ResponseInfo</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Model.input_layers" title="Permalink to this definition">#</a></dt>
<dd><p>Get all potential input layers of the model. Result is returned as a mapping between
input layer names and the corresponding <a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base.ResponseInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseInfo</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.Model.response_infos">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">response_infos</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base._response_info.ResponseInfo"><span class="pre">ResponseInfo</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Model.response_infos" title="Permalink to this definition">#</a></dt>
<dd><p>Get all possible responses in a model. Result is returned as a mapping between response
names and the corresponding <a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base.ResponseInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseInfo</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">ResponseInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layer</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_response_info.html#ResponseInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.ResponseInfo" title="Permalink to this definition">#</a></dt>
<dd><p>Information about of a model’s response.</p>
<p>A response is the output tensor of a model operation (ie. layer or a module depending on the
deep-learning framework used). Note that an operation may have more than one response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – see <a class="reference internal" href="#dnikit.base.ResponseInfo.name" title="dnikit.base.ResponseInfo.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a></p></li>
<li><p><strong>dtype</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.25)"><em>dtype</em></a>) – see <a class="reference internal" href="#dnikit.base.ResponseInfo.dtype" title="dnikit.base.ResponseInfo.dtype"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dtype</span></code></a></p></li>
<li><p><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> | </em><em>None</em><em>, </em><em>...</em><em>]</em>) – see <a class="reference internal" href="#dnikit.base.ResponseInfo.shape" title="dnikit.base.ResponseInfo.shape"><code class="xref py py-attr docutils literal notranslate"><span class="pre">shape</span></code></a></p></li>
<li><p><strong>layer</strong> (<a class="reference internal" href="#dnikit.base.ResponseInfo.Layer" title="dnikit.base._response_info.ResponseInfo.Layer"><em>Layer</em></a>) – see <a class="reference internal" href="#dnikit.base.ResponseInfo.layer" title="dnikit.base.ResponseInfo.layer"><code class="xref py py-attr docutils literal notranslate"><span class="pre">layer</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.Layer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Layer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_response_info.html#ResponseInfo.Layer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.ResponseInfo.Layer" title="Permalink to this definition">#</a></dt>
<dd><p>Class to hold information about the layer that generated the response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – see <a class="reference internal" href="#dnikit.base.ResponseInfo.Layer.name" title="dnikit.base.ResponseInfo.Layer.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a></p></li>
<li><p><strong>kind</strong> (<a class="reference internal" href="#dnikit.base.ResponseInfo.LayerKind" title="dnikit.base._response_info.ResponseInfo.LayerKind"><em>LayerKind</em></a>) – see <a class="reference internal" href="#dnikit.base.ResponseInfo.Layer.kind" title="dnikit.base.ResponseInfo.Layer.kind"><code class="xref py py-attr docutils literal notranslate"><span class="pre">kind</span></code></a></p></li>
<li><p><strong>typename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – see <a class="reference internal" href="#dnikit.base.ResponseInfo.Layer.typename" title="dnikit.base.ResponseInfo.Layer.typename"><code class="xref py py-attr docutils literal notranslate"><span class="pre">typename</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.Layer.kind">
<span class="sig-name descname"><span class="pre">kind</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.ResponseInfo.LayerKind" title="dnikit.base._response_info.ResponseInfo.LayerKind"><span class="pre">LayerKind</span></a></em><a class="headerlink" href="#dnikit.base.ResponseInfo.Layer.kind" title="Permalink to this definition">#</a></dt>
<dd><p>DNIKit-generic type of the layer that generated the response.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>DNIKit only understands the most common type of layers. For other types of
layers, it may be necessary to check the exact name provided by the framework used.</p>
<p>See <a class="reference internal" href="#dnikit.base.ResponseInfo.Layer.typename" title="dnikit.base.ResponseInfo.Layer.typename"><code class="xref py py-attr docutils literal notranslate"><span class="pre">typename</span></code></a> for more info.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.Layer.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></em><a class="headerlink" href="#dnikit.base.ResponseInfo.Layer.name" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the layer that generated the response.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.Layer.typename">
<span class="sig-name descname"><span class="pre">typename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></em><a class="headerlink" href="#dnikit.base.ResponseInfo.Layer.typename" title="Permalink to this definition">#</a></dt>
<dd><p>Framework-dependent name of the type of the layer that generated the response.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This property does not generalize across different deep learning frameworks (e.g.,
tensorflow or pytorch). Use with care for code that needs to work across
different frameworks.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LayerKind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_response_info.html#ResponseInfo.LayerKind"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind" title="Permalink to this definition">#</a></dt>
<dd><p>DNIKit abstraction to represent several types of common deep learning layers.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.ATTENTION">
<span class="sig-name descname"><span class="pre">ATTENTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8007</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.ATTENTION" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_1D">
<span class="sig-name descname"><span class="pre">AVERAGE_POOLING_1D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3004</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_1D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_2D">
<span class="sig-name descname"><span class="pre">AVERAGE_POOLING_2D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3005</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_2D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_3D">
<span class="sig-name descname"><span class="pre">AVERAGE_POOLING_3D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3006</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_3D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.BATCH_NORM">
<span class="sig-name descname"><span class="pre">BATCH_NORM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_2D">
<span class="sig-name descname"><span class="pre">BATCH_NORM_2D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5001</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_2D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_3D">
<span class="sig-name descname"><span class="pre">BATCH_NORM_3D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5002</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_3D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.CONV_1D">
<span class="sig-name descname"><span class="pre">CONV_1D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.CONV_1D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.CONV_2D">
<span class="sig-name descname"><span class="pre">CONV_2D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2001</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.CONV_2D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.CONV_3D">
<span class="sig-name descname"><span class="pre">CONV_3D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2002</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.CONV_3D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_1D">
<span class="sig-name descname"><span class="pre">CONV_TRANSPOSE_1D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2003</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_1D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_2D">
<span class="sig-name descname"><span class="pre">CONV_TRANSPOSE_2D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2004</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_2D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_3D">
<span class="sig-name descname"><span class="pre">CONV_TRANSPOSE_3D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2005</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_3D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.DENSE">
<span class="sig-name descname"><span class="pre">DENSE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.DENSE" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.DROPOUT">
<span class="sig-name descname"><span class="pre">DROPOUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">6000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.DROPOUT_2D">
<span class="sig-name descname"><span class="pre">DROPOUT_2D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">6001</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT_2D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.DROPOUT_3D">
<span class="sig-name descname"><span class="pre">DROPOUT_3D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">6002</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT_3D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.ELU">
<span class="sig-name descname"><span class="pre">ELU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8005</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.ELU" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.GRU">
<span class="sig-name descname"><span class="pre">GRU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4002</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.GRU" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.LAYER_NORM">
<span class="sig-name descname"><span class="pre">LAYER_NORM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5003</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.LAYER_NORM" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.LEAKY_RELU">
<span class="sig-name descname"><span class="pre">LEAKY_RELU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8003</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.LEAKY_RELU" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.LINEAR">
<span class="sig-name descname"><span class="pre">LINEAR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.LINEAR" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.LSTM">
<span class="sig-name descname"><span class="pre">LSTM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4001</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.LSTM" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_1D">
<span class="sig-name descname"><span class="pre">MAX_POOLING_1D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_1D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_2D">
<span class="sig-name descname"><span class="pre">MAX_POOLING_2D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3001</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_2D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_3D">
<span class="sig-name descname"><span class="pre">MAX_POOLING_3D</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3003</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_3D" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.PLACEHOLDER">
<span class="sig-name descname"><span class="pre">PLACEHOLDER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1001</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.PLACEHOLDER" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.PRELU">
<span class="sig-name descname"><span class="pre">PRELU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8004</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.PRELU" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.RELU">
<span class="sig-name descname"><span class="pre">RELU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8002</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.RELU" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.RELU6">
<span class="sig-name descname"><span class="pre">RELU6</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8008</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.RELU6" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.RNN">
<span class="sig-name descname"><span class="pre">RNN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.RNN" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.SIGMOID">
<span class="sig-name descname"><span class="pre">SIGMOID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8000</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.SIGMOID" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.SOFTMAX">
<span class="sig-name descname"><span class="pre">SOFTMAX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8006</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.SOFTMAX" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.TANH">
<span class="sig-name descname"><span class="pre">TANH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8001</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.TANH" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.LayerKind.UNKNOWN">
<span class="sig-name descname"><span class="pre">UNKNOWN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.LayerKind.UNKNOWN" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.25)"><span class="pre">dtype</span></a></em><a class="headerlink" href="#dnikit.base.ResponseInfo.dtype" title="Permalink to this definition">#</a></dt>
<dd><p>Data type of the response.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.layer">
<span class="sig-name descname"><span class="pre">layer</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#dnikit.base.ResponseInfo.Layer" title="dnikit.base._response_info.ResponseInfo.Layer"><span class="pre">Layer</span></a></em><a class="headerlink" href="#dnikit.base.ResponseInfo.layer" title="Permalink to this definition">#</a></dt>
<dd><p>Details about the layer that generates this response.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></em><a class="headerlink" href="#dnikit.base.ResponseInfo.name" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the response.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ResponseInfo.shape">
<span class="sig-name descname"><span class="pre">shape</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.ResponseInfo.shape" title="Permalink to this definition">#</a></dt>
<dd><p>Shape of the response. The first dimension will generally be <cite>None</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base._model._ModelDetails">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base._model.</span></span><span class="sig-name descname"><span class="pre">_ModelDetails</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_model.html#_ModelDetails"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base._model._ModelDetails" title="Permalink to this definition">#</a></dt>
<dd><p>Protocol to wrap models from other deep learning frameworks into DNIKit.</p>
<p>Derived classes must implement <a class="reference internal" href="#dnikit.base._model._ModelDetails.run_inference" title="dnikit.base._model._ModelDetails.run_inference"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_inference()</span></code></a> and <a class="reference internal" href="#dnikit.base._model._ModelDetails.get_response_infos" title="dnikit.base._model._ModelDetails.get_response_infos"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_response_infos()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As a private class, the API may be changed in a future release.</p>
<p>To wrap a deep learning framework that DNIKit does not currently support,
it’s recommended to create a custom <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> that yields the
model responses, rather than creating a custom <code class="docutils literal notranslate"><span class="pre">_ModelDetails</span></code>.</p>
<p>This class is intended for code that will eventually be integrated into DNIKit.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base._model._ModelDetails.get_input_layer_responses">
<span class="sig-name descname"><span class="pre">get_input_layer_responses</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_model.html#_ModelDetails.get_input_layer_responses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base._model._ModelDetails.get_input_layer_responses" title="Permalink to this definition">#</a></dt>
<dd><p>Obtain all input layers to the model as <a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base.ResponseInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseInfo</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a>[<a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base._response_info.ResponseInfo"><em>ResponseInfo</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base._model._ModelDetails.get_response_infos">
<span class="sig-name descname"><span class="pre">get_response_infos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_model.html#_ModelDetails.get_response_infos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base._model._ModelDetails.get_response_infos" title="Permalink to this definition">#</a></dt>
<dd><p>Obtain <a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base.ResponseInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseInfo</span></code></a> for all layers in the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[<a class="reference internal" href="#dnikit.base.ResponseInfo" title="dnikit.base._response_info.ResponseInfo"><em>ResponseInfo</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base._model._ModelDetails.run_inference">
<span class="sig-name descname"><span class="pre">run_inference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_model.html#_ModelDetails.run_inference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base._model._ModelDetails.run_inference" title="Permalink to this definition">#</a></dt>
<dd><p>Run inference on a single batch of input data and return its corresponding response.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function runs inference upon being called.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a><em>]</em>) – A map of layer name to <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>.</p></li>
<li><p><strong>outputs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AbstractSet" title="(in Python v3.11)"><em>AbstractSet</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – Selects responses to be collected from the model after feeding the
input batch through.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A map of response names to <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> containing the requested model responses
to the input data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="introspectors">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Introspectors</a><a class="headerlink" href="#introspectors" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.Introspector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">Introspector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_introspector.html#Introspector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.Introspector" title="Permalink to this definition">#</a></dt>
<dd><p>Define the <code class="docutils literal notranslate"><span class="pre">Introspector</span></code> protocol.</p>
<p>All DNIKit algorithms implement the <code class="docutils literal notranslate"><span class="pre">Introspector</span></code> protocol, which specifies
that algorithms <strong>must</strong> implement a static factory method <a class="reference internal" href="#dnikit.base.Introspector.introspect" title="dnikit.base.Introspector.introspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">introspect()</span></code></a>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">&lt;Algorithm&gt;.introspect(...)</span></code> is called, the producers will be triggered
so that the algorithms can consume data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The arguments and return type of <a class="reference internal" href="#dnikit.base.Introspector.introspect" title="dnikit.base.Introspector.introspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">introspect()</span></code></a> are algorithm dependent.</p>
</div>
<p>The current list of DNIKit algorithms includes:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="introspectors.html#dnikit.introspectors.PFA" title="dnikit.introspectors.PFA"><code class="xref py py-class docutils literal notranslate"><span class="pre">PFA</span></code></a> – Principal Filtering Analysis</p></li>
<li><p><a class="reference internal" href="introspectors.html#dnikit.introspectors.IUA" title="dnikit.introspectors.IUA"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUA</span></code></a> – Inactive Unit Analysis</p></li>
<li><p><a class="reference internal" href="introspectors.html#dnikit.introspectors.DimensionReduction" title="dnikit.introspectors.DimensionReduction"><code class="xref py py-class docutils literal notranslate"><span class="pre">DimensionReduction</span></code></a>
– Dimension Reduction, e.g. PCA</p></li>
<li><p><a class="reference internal" href="introspectors.html#dnikit.introspectors.Familiarity" title="dnikit.introspectors.Familiarity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Familiarity</span></code></a></p></li>
<li><p><a class="reference internal" href="introspectors.html#dnikit.introspectors.Duplicates" title="dnikit.introspectors.Duplicates"><code class="xref py py-class docutils literal notranslate"><span class="pre">Duplicates</span></code></a></p></li>
<li><p><a class="reference internal" href="introspectors.html#dnikit.introspectors.DatasetReport" title="dnikit.introspectors.DatasetReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetReport</span></code></a>
- Runs Familiarity, Duplicates, DimensionReduction</p></li>
</ul>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.Introspector.introspect">
<span class="sig-name descname"><span class="pre">introspect</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.Introspector.introspect" title="Permalink to this definition">#</a></dt>
<dd><p>Static factory method shared by all implementations of <code class="docutils literal notranslate"><span class="pre">Introspector</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling this method will trigger any <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> or <a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipeline()</span></code></a>
that is passed as an argument.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>[For DNIKit contributors]</strong> All new introspectors must, obviously, implement
this protocol. Moreover an introspector is supposed to behave like a
factory method (ie return a new instance of the introspector).</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dnikit.base.multi_introspect">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/dnikit/base/_multi_introspect.html#multi_introspect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.multi_introspect" title="Permalink to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T1</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in3</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T1</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in3</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in4</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T1</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in3</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in4</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in5</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T5</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T1</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T5</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in3</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in4</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in5</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T5</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in6</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T6</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T1</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T5</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T6</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in3</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in4</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in5</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T5</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in6</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T6</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in7</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T7</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T1</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T2</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T3</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T4</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T5</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T6</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T7</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">multi_introspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">introspectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">producer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><span class="pre">Producer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Execute one or more <a class="reference internal" href="#dnikit.base.Introspector" title="dnikit.base.Introspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">introspectors</span></code></a> concurrently reusing
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> from a <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>.</p>
<p>This can be more memory efficient than running introspectors sequentially (as the
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batches</span></code></a> are produced just once).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>introspectors</strong> – one or more introspectors (ie functions that take a <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>,
introspect the batches and return a result). The input arguments can <em>only</em> take
a single <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>, it may be necessary to use a lambda function, a closure,
or <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> to pass other arguments.</p></li>
<li><p><strong>producer</strong> – <strong>[keyword arg]</strong> the <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> whose <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> will be reused
for each of the <code class="docutils literal notranslate"><span class="pre">introspectors</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple with the result of each input <code class="docutils literal notranslate"><span class="pre">introspector</span></code> in the order they were passed.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if <code class="docutils literal notranslate"><span class="pre">introspectors</span></code> request batches of different sizes.</p></li>
<li><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if either the <code class="docutils literal notranslate"><span class="pre">producer</span></code> or any of the <code class="docutils literal notranslate"><span class="pre">introspectors</span></code> raises. If any
    exception is raised, all <code class="docutils literal notranslate"><span class="pre">introspectors</span></code> will be stopped.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">producer</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># Instantiate a valid Producer</span>

<span class="n">pfa</span><span class="p">,</span> <span class="n">familiarity</span> <span class="o">=</span> <span class="n">multi_introspect</span><span class="p">(</span>
    <span class="n">PFA</span><span class="o">.</span><span class="n">introspect</span><span class="p">,</span>
    <span class="n">Familiarity</span><span class="o">.</span><span class="n">introspect</span><span class="p">,</span>
    <span class="n">producer</span><span class="o">=</span><span class="n">producer</span>
<span class="p">)</span>
<span class="c1"># pfa and familiarity now contain the results of PFA and Familiarity</span>
</pre></div>
</div>
<p>Sometimes it’s necessary to pass arguments to the introspectors, in which case it’s
recommended to use a lambda function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">multi_introspect</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">prod</span><span class="p">:</span> <span class="n">Familiarity</span><span class="o">.</span><span class="n">introspect</span><span class="p">(</span><span class="n">prod</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="n">Familiarity</span><span class="o">.</span><span class="n">Strategy</span><span class="o">.</span><span class="n">GMM</span><span class="p">()),</span>
    <span class="o">...</span>
    <span class="n">producer</span><span class="o">=</span><span class="n">producer</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, it’s possible to use <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">multi_introspect</span><span class="p">(</span>
    <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">Familiarity</span><span class="o">.</span><span class="n">introspect</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="n">Familiarity</span><span class="o">.</span><span class="n">Strategy</span><span class="o">.</span><span class="n">GMM</span><span class="p">())</span>
    <span class="o">...</span>
    <span class="n">producer</span><span class="o">=</span><span class="n">producer</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="processors.html#dnikit.processors.Cacher" title="dnikit.processors.Cacher"><code class="xref py py-class docutils literal notranslate"><span class="pre">dnikit.processors.Cacher</span></code></a> which will store <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batches</span></code></a> in the
filesystem enabling use of the same <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batches</span></code></a> with two different
<a class="reference internal" href="#dnikit.base.Introspector" title="dnikit.base.Introspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">introspectors</span></code></a>. If the dataset fits on the
hard-drive, <a class="reference internal" href="processors.html#dnikit.processors.Cacher" title="dnikit.processors.Cacher"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cacher</span></code></a> may be a better option
(since it will require less RAM).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Implementation detail</strong>: currently <code class="docutils literal notranslate"><span class="pre">multi_introspect</span></code> is implemented using Python
threads to be able to preempt <a class="reference internal" href="#dnikit.base.Introspector" title="dnikit.base.Introspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">introspectors</span></code></a>.
In fact, this function will start
<em>one thread per introspector instance</em>. However, only one thread will be active at a
time so, in all likelihood, it will not be necessary to make code thread-safe.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not attempt to catch the <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssertionError</span></code></a> in any of the input
<a class="reference internal" href="#dnikit.base.Introspector" title="dnikit.base.Introspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">introspectors</span></code></a>, doing so may cause deadlock!</p>
</div>
</dd></dl>

</section>
<section id="utilities">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Utilities</a><a class="headerlink" href="#utilities" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.TrainTestSplitProducer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">TrainTestSplitProducer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attach_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_traintest_producer.html#TrainTestSplitProducer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.TrainTestSplitProducer" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a></p>
<p>Produce <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batches</span></code></a> from a train/test split of the form:</p>
<p><code class="docutils literal notranslate"><span class="pre">(x_train,</span> <span class="pre">y_train),</span> <span class="pre">(x_test,</span> <span class="pre">y_test)</span></code></p>
<p>where variables are numpy arrays, the <cite>x</cite> arrays represent features,
and the <cite>y</cite> arrays represent labels.</p>
<p>For instance, for MNIST, features array <code class="docutils literal notranslate"><span class="pre">x_train</span></code> might be of shape
(60000, 28, 28, 1) with corresponding labels array <code class="docutils literal notranslate"><span class="pre">y_train</span></code> might be of shape (60000, 1).</p>
<p>Only one of <code class="docutils literal notranslate"><span class="pre">x_train</span></code>, <code class="docutils literal notranslate"><span class="pre">x_test</span></code> can be empty (size 0 NumPy array).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This format is the direct output of calling
<code class="xref py py-func docutils literal notranslate"><span class="pre">load_data()</span></code> on a <a class="reference external" href="https://keras.io/api/datasets/">tf.keras.dataset</a>.
One can initialize a dataset from <code class="xref py py-mod docutils literal notranslate"><span class="pre">tf.keras.datasets</span></code> simply by writing:</p>
<p><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer(tf.keras.datasets.cifar10.load_data())</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>split_dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><em>ndarray</em></a><em>]</em><em>]</em>) – see <a class="reference internal" href="#dnikit.base.TrainTestSplitProducer.split_dataset" title="dnikit.base.TrainTestSplitProducer.split_dataset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">split_dataset</span></code></a></p></li>
<li><p><strong>attach_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – <strong>[optional]</strong> see <a class="reference internal" href="#dnikit.base.TrainTestSplitProducer.attach_metadata" title="dnikit.base.TrainTestSplitProducer.attach_metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">attach_metadata</span></code></a></p></li>
<li><p><strong>max_samples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – <strong>[optional]</strong> see <a class="reference internal" href="#dnikit.base.TrainTestSplitProducer.max_samples" title="dnikit.base.TrainTestSplitProducer.max_samples"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_samples</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.TrainTestSplitProducer.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_traintest_producer.html#TrainTestSplitProducer.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.TrainTestSplitProducer.__call__" title="Permalink to this definition">#</a></dt>
<dd><p>Produce generic <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> es from the loaded data,
running through training and test sets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – the length of batches to produce</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>yields <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batches</span></code></a> of the split_dataset of size <code class="docutils literal notranslate"><span class="pre">batch_size</span></code>.
If <code class="docutils literal notranslate"><span class="pre">self.attach_metadata</span></code> is True, attaches metadata in format:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dnikit.base.Batch.StdKeys.IDENTIFIER" title="dnikit.base.Batch.StdKeys.IDENTIFIER"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.StdKeys.IDENTIFIER</span></code></a>: A NumPy array of ints representing unique indices</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="#dnikit.base.Batch.StdKeys.LABELS" title="dnikit.base.Batch.StdKeys.LABELS"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch.StdKeys.LABELS</span></code></a>: A dict with:</dt><dd><ul>
<li><p>”label”: a NumPy array of label features (format specific to each dataset)</p></li>
<li><p>”dataset”: a NumPy array of ints either 0 (for “train”) or 1 (for “test”)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.TrainTestSplitProducer.attach_metadata">
<span class="sig-name descname"><span class="pre">attach_metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#dnikit.base.TrainTestSplitProducer.attach_metadata" title="Permalink to this definition">#</a></dt>
<dd><p>Whether to attach metadata to batches (e.g., labels) or not.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.TrainTestSplitProducer.max_samples">
<span class="sig-name descname"><span class="pre">max_samples</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#dnikit.base.TrainTestSplitProducer.max_samples" title="Permalink to this definition">#</a></dt>
<dd><p>Max data samples to pull from. Set to -1 to pull all samples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.TrainTestSplitProducer.shuffle">
<span class="sig-name descname"><span class="pre">shuffle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_traintest_producer.html#TrainTestSplitProducer.shuffle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.TrainTestSplitProducer.shuffle" title="Permalink to this definition">#</a></dt>
<dd><p>Shuffle the dataset, to produce randomized samples in batches.
Note: this shuffling will not transfer to subsets.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.TrainTestSplitProducer.split_dataset">
<span class="sig-name descname"><span class="pre">split_dataset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.25)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.TrainTestSplitProducer.split_dataset" title="Permalink to this definition">#</a></dt>
<dd><p>The underlying dataset, stored in NumPy arrays of the following tuple format:</p>
<p><code class="docutils literal notranslate"><span class="pre">(x_train,</span> <span class="pre">x_test),</span> <span class="pre">(y_train,</span> <span class="pre">y_test)</span></code></p>
<p>Note that the left side has to represent the “train” set, and the right has to be “test”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.TrainTestSplitProducer.subset">
<span class="sig-name descname"><span class="pre">subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datasets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_traintest_producer.html#TrainTestSplitProducer.subset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.TrainTestSplitProducer.subset" title="Permalink to this definition">#</a></dt>
<dd><p>Filter the data samples by specific labels or datasets, returning
a new <a class="reference internal" href="#dnikit.base.TrainTestSplitProducer" title="dnikit.base.TrainTestSplitProducer"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrainTestSplitProducer</span></code></a> that only produces the filtered data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<em>None</em><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.11)"><em>Hashable</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Collection" title="(in Python v3.11)"><em>Collection</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.11)"><em>Hashable</em></a><em>]</em>) – <strong>[optional]</strong> a single label or list of labels in <code class="docutils literal notranslate"><span class="pre">y_train,</span> <span class="pre">y_test</span></code> to
include. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, includes all.</p></li>
<li><p><strong>datasets</strong> (<em>None</em><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Collection" title="(in Python v3.11)"><em>Collection</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – <strong>[optional]</strong> a single str or list of dataset names to include
(only <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code> are acceptable).
If None, includes both train and test sets.</p></li>
<li><p><strong>max_samples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> | </em><em>None</em>) – <strong>[optional]</strong> how many data samples to include (-1 for all).
If not set, will use the existing instance’s <code class="docutils literal notranslate"><span class="pre">max_samples</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#dnikit.base.TrainTestSplitProducer" title="dnikit.base.TrainTestSplitProducer"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrainTestSplitProducer</span></code></a> of the same class that
produces only the filtered data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#dnikit.base.TrainTestSplitProducer" title="dnikit.base._traintest_producer.TrainTestSplitProducer"><em>TrainTestSplitProducer</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.CachedProducer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">CachedProducer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_cached_producer.html#CachedProducer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.CachedProducer" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">_Logged</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code> is a <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> that reads batches already cached on disk.</p>
<p>Refer to <a class="reference internal" href="processors.html#dnikit.processors.Cacher" title="dnikit.processors.Cacher"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cacher</span></code></a> to cache the
<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">batches</span></code></a> produced by other <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">producers</span></code></a> and
<a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">pipelines</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just as with <a class="reference internal" href="#dnikit.base.ImageProducer" title="dnikit.base.ImageProducer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageProducer</span></code></a> (and, in general, any <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>) no computation
(or in this loading of cached batches) will be executed until the <a class="reference internal" href="#dnikit.base.CachedProducer.__call__" title="dnikit.base.CachedProducer.__call__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__call__()</span></code></a> method
(or an associated pipeline) is invoked.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code> has the ability to resize batches if batches of
different sizes are requested in comparison to the ones stored on disk.
However, doing so is relatively computationally
expensive since it involves concatenating and splitting batches. Therefore it’s recommended
to use this feature sparingly.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>storage_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><em>Path</em></a>) – path in disk where the cached batches are stored.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if <code class="docutils literal notranslate"><span class="pre">storage_path</span></code> does not contain cached batches.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.CachedProducer.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_cached_producer.html#CachedProducer.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.CachedProducer.__call__" title="Permalink to this definition">#</a></dt>
<dd><p>Produce <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> with <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> elements by loading previously cached batches
from disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – number of elements in every batch to be streamed.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is a non-positive number</p></li>
<li><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if cached files have been erased from disk since <code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code>
    initialization.</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.CachedProducer.copy_to">
<span class="sig-name descname"><span class="pre">copy_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_cached_producer.html#CachedProducer.copy_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.CachedProducer.copy_to" title="Permalink to this definition">#</a></dt>
<dd><p>Copy the cached files used by this <code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code> to another local path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>new_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><em>Path</em></a>) – Destination path</p></li>
<li><p><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – <strong>[keyword arg, optional]</strong> overwrite cache files in <code class="docutils literal notranslate"><span class="pre">new_path</span></code>
(if they exist) [default=False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a new <code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code> which will read elements from <code class="docutils literal notranslate"><span class="pre">new_path</span></code>.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if batch data has been cleared from file after initialization or
    if <code class="docutils literal notranslate"><span class="pre">new_path</span></code> contains cache files and <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> is False.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#dnikit.base.CachedProducer" title="dnikit.base._cached_producer.CachedProducer"><em>CachedProducer</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dnikit.base.CachedProducer.storage_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">storage_path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><span class="pre">Path</span></a></em><a class="headerlink" href="#dnikit.base.CachedProducer.storage_path" title="Permalink to this definition">#</a></dt>
<dd><p>The path from where this <code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code> will read batches.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.ImageProducer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">ImageProducer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'images'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_image_producer.html#ImageProducer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.ImageProducer" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">_Logged</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">ImageProducer</span></code> is a data <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> that streams images loaded from the filesystem.</p>
<p>The images are loaded in <code class="docutils literal notranslate"><span class="pre">NHWC</span></code> format with <code class="docutils literal notranslate"><span class="pre">C=1</span></code> for grayscale images,
<code class="docutils literal notranslate"><span class="pre">C=3</span></code> (RGB) for color images and <code class="docutils literal notranslate"><span class="pre">C=4</span></code> (RGBA) with images with transparency.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OpenCV is used to load images and therefore this class supports every format that library
supports. Check the <a class="reference external" href="https://docs.opencv.org/">OpenCV docs</a> for supported formats.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All images must have the same height, width and number of channels (<code class="docutils literal notranslate"><span class="pre">HWC</span></code>). Otherwise
batch creation in <a class="reference internal" href="#dnikit.base.ImageProducer.__call__" title="dnikit.base.ImageProducer.__call__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__call__()</span></code></a> will fail.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><em>Path</em></a>) – root directory where images are located. As with other <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>
images are only loaded to memory when batches are requested.</p></li>
<li><p><strong>extensions</strong> (<em>None</em><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Collection" title="(in Python v3.11)"><em>Collection</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – <strong>[keyword arg, optional]</strong> one, many or none extensions to be used to discover
images when traversing the filesystem. If no extensions are provided default list will
be used (which includes jpeg, jpg, png, bmp, and tiff).</p></li>
<li><p><strong>recursive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – <strong>[keyword arg, optional]</strong> if <code class="docutils literal notranslate"><span class="pre">True</span></code>, all subdirectories of <code class="docutils literal notranslate"><span class="pre">directory</span></code>
will be traversed, otherwise only <code class="docutils literal notranslate"><span class="pre">directory</span></code> will be used to discover images
(defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p></li>
<li><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – <strong>[keyword arg, optional]</strong> the key under which the images will be stored in the
resulting data <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> (defaults to “images”).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#NotADirectoryError" title="(in Python v3.11)"><strong>NotADirectoryError</strong></a> – if the <code class="docutils literal notranslate"><span class="pre">directory</span></code> is not a directory.</p></li>
<li><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if no images are found in the given <code class="docutils literal notranslate"><span class="pre">directory</span></code>.</p></li>
<li><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if OpenCV is not available.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dnikit.base.ImageProducer.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_image_producer.html#ImageProducer.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.ImageProducer.__call__" title="Permalink to this definition">#</a></dt>
<dd><p>Produce data <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of the images found of the the size requested.
<a class="reference internal" href="#dnikit.base.Batch.StdKeys.PATH" title="dnikit.base.Batch.StdKeys.PATH"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.StdKeys.PATH</span></code></a> and <a class="reference internal" href="#dnikit.base.Batch.StdKeys.IDENTIFIER" title="dnikit.base.Batch.StdKeys.IDENTIFIER"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.StdKeys.IDENTIFIER</span></code></a> will both be set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – size of the batch to be streamed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a data <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> encapsulating the data loaded from file.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is a non-positive number</p></li>
<li><p><a class="reference internal" href="exceptions.html#dnikit.exceptions.DNIKitException" title="dnikit.exceptions.DNIKitException"><strong>DNIKitException</strong></a> – if images do not all have the same dimensions</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[<a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ImageProducer.field">
<span class="sig-name descname"><span class="pre">field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></em><a class="headerlink" href="#dnikit.base.ImageProducer.field" title="Permalink to this definition">#</a></dt>
<dd><p>Name of the batch field where the loaded images will be stored.</p>
<p>The same name will also be used to store the image paths as metadata keyed
with <a class="reference internal" href="#dnikit.base.Batch.StdKeys.PATH" title="dnikit.base.Batch.StdKeys.PATH"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Batch.StdKeys.PATH</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ImageProducer.image_paths">
<span class="sig-name descname"><span class="pre">image_paths</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><span class="pre">Path</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#dnikit.base.ImageProducer.image_paths" title="Permalink to this definition">#</a></dt>
<dd><p>Return the sequence of image paths that were found upon initialization.</p>
<p>These images will be used to create batches by <a class="reference internal" href="#dnikit.base.ImageProducer.__call__" title="dnikit.base.ImageProducer.__call__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__call__()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dnikit.base.ImageFormat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">ImageFormat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_image_producer.html#ImageFormat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.ImageFormat" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a></p>
<p>Layout of the pixel data. Value is argument to np.transpose to put it into <code class="docutils literal notranslate"><span class="pre">HWC</span></code> format.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ImageFormat.CHW">
<span class="sig-name descname"><span class="pre">CHW</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">(2,</span> <span class="pre">1,</span> <span class="pre">0)</span></em><a class="headerlink" href="#dnikit.base.ImageFormat.CHW" title="Permalink to this definition">#</a></dt>
<dd><p>Channels x Height x Width</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dnikit.base.ImageFormat.HWC">
<span class="sig-name descname"><span class="pre">HWC</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">(0,</span> <span class="pre">1,</span> <span class="pre">2)</span></em><a class="headerlink" href="#dnikit.base.ImageFormat.HWC" title="Permalink to this definition">#</a></dt>
<dd><p>Height x Width x Channels</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dnikit.base.peek_first_batch">
<span class="sig-prename descclassname"><span class="pre">dnikit.base.</span></span><span class="sig-name descname"><span class="pre">peek_first_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">producer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/dnikit/base/_producer.html#peek_first_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dnikit.base.peek_first_batch" title="Permalink to this definition">#</a></dt>
<dd><p>Helper function to examine the first <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> (optionally giving a batch_size)
of a <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>. This is useful in debugging/inspecting the output of a
<a class="reference internal" href="#dnikit.base.pipeline" title="dnikit.base.pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">pipeline</span></code></a> or data source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>producer</strong> (<a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base._producer.Producer"><em>Producer</em></a>) – the <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> to pull data from</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – <strong>[optional]</strong> the size of <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> to pull</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The first <a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> from the <a class="reference internal" href="#dnikit.base.Producer" title="dnikit.base.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#dnikit.base.Batch" title="dnikit.base._batch._batch.Batch"><em>Batch</em></a></p>
</dd>
</dl>
</dd></dl>

</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">dnikit</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="processors.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Processors API</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-management-producer">Data Management – Producer</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Producer"><code class="docutils literal notranslate"><span class="pre">Producer</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-management-batch">Data Management – Batch</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch"><code class="docutils literal notranslate"><span class="pre">Batch</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.batch_size"><code class="docutils literal notranslate"><span class="pre">Batch.batch_size</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.elements"><code class="docutils literal notranslate"><span class="pre">Batch.elements</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.fields"><code class="docutils literal notranslate"><span class="pre">Batch.fields</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.metadata"><code class="docutils literal notranslate"><span class="pre">Batch.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.snapshots"><code class="docutils literal notranslate"><span class="pre">Batch.snapshots</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementsView"><code class="docutils literal notranslate"><span class="pre">ElementsView</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementsView.__getitem__"><code class="docutils literal notranslate"><span class="pre">ElementsView.__getitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementsView.__iter__"><code class="docutils literal notranslate"><span class="pre">ElementsView.__iter__()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType"><code class="docutils literal notranslate"><span class="pre">ElementType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType.fields"><code class="docutils literal notranslate"><span class="pre">ElementType.fields</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType.metadata"><code class="docutils literal notranslate"><span class="pre">ElementType.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.ElementType.snapshots"><code class="docutils literal notranslate"><span class="pre">ElementType.snapshots</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetaKey"><code class="docutils literal notranslate"><span class="pre">MetaKey</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetaKey.name"><code class="docutils literal notranslate"><span class="pre">MetaKey.name</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.DictMetaKey"><code class="docutils literal notranslate"><span class="pre">DictMetaKey</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.DictMetaKey.name"><code class="docutils literal notranslate"><span class="pre">DictMetaKey.name</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType"><code class="docutils literal notranslate"><span class="pre">MetadataType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.__bool__"><code class="docutils literal notranslate"><span class="pre">MetadataType.__bool__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.__contains__"><code class="docutils literal notranslate"><span class="pre">MetadataType.__contains__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.__getitem__"><code class="docutils literal notranslate"><span class="pre">MetadataType.__getitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.keys"><code class="docutils literal notranslate"><span class="pre">MetadataType.keys()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType"><code class="docutils literal notranslate"><span class="pre">ElementType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType.__bool__"><code class="docutils literal notranslate"><span class="pre">ElementType.__bool__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType.__contains__"><code class="docutils literal notranslate"><span class="pre">ElementType.__contains__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.MetadataType.ElementType.__getitem__"><code class="docutils literal notranslate"><span class="pre">ElementType.__getitem__()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder"><code class="docutils literal notranslate"><span class="pre">Builder</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.fields"><code class="docutils literal notranslate"><span class="pre">Builder.fields</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.make_batch"><code class="docutils literal notranslate"><span class="pre">Builder.make_batch()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.metadata"><code class="docutils literal notranslate"><span class="pre">Builder.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.snapshots"><code class="docutils literal notranslate"><span class="pre">Builder.snapshots</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys"><code class="docutils literal notranslate"><span class="pre">StdKeys</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys.IDENTIFIER"><code class="docutils literal notranslate"><span class="pre">StdKeys.IDENTIFIER</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys.LABELS"><code class="docutils literal notranslate"><span class="pre">StdKeys.LABELS</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.StdKeys.PATH"><code class="docutils literal notranslate"><span class="pre">StdKeys.PATH</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__bool__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__bool__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__contains__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__contains__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__delitem__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__delitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__getitem__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__getitem__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Batch.Builder.MutableMetadataType.__setitem__"><code class="docutils literal notranslate"><span class="pre">MutableMetadataType.__setitem__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pipelines">Pipelines</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.pipeline"><code class="docutils literal notranslate"><span class="pre">pipeline()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.PipelineStage"><code class="docutils literal notranslate"><span class="pre">PipelineStage</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.PipelineStage._get_batch_processor"><code class="docutils literal notranslate"><span class="pre">PipelineStage._get_batch_processor()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.PipelineStage._pipeline"><code class="docutils literal notranslate"><span class="pre">PipelineStage._pipeline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model.__call__"><code class="docutils literal notranslate"><span class="pre">Model.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model.input_layers"><code class="docutils literal notranslate"><span class="pre">Model.input_layers</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Model.response_infos"><code class="docutils literal notranslate"><span class="pre">Model.response_infos</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo"><code class="docutils literal notranslate"><span class="pre">ResponseInfo</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer.kind"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer.kind</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer.name"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer.name</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.Layer.typename"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.Layer.typename</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.ATTENTION"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.ATTENTION</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.AVERAGE_POOLING_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.AVERAGE_POOLING_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.AVERAGE_POOLING_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.AVERAGE_POOLING_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.BATCH_NORM</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.BATCH_NORM_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.BATCH_NORM_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.BATCH_NORM_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_TRANSPOSE_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_TRANSPOSE_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.CONV_TRANSPOSE_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.CONV_TRANSPOSE_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DENSE"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DENSE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DROPOUT</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DROPOUT_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.DROPOUT_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.DROPOUT_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.ELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.ELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.GRU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.GRU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LAYER_NORM"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LAYER_NORM</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LEAKY_RELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LEAKY_RELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LINEAR"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LINEAR</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.LSTM"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.LSTM</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_1D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.MAX_POOLING_1D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_2D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.MAX_POOLING_2D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.MAX_POOLING_3D"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.MAX_POOLING_3D</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.PLACEHOLDER"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.PLACEHOLDER</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.PRELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.PRELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.RELU"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.RELU</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.RELU6"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.RELU6</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.RNN"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.RNN</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.SIGMOID"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.SIGMOID</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.SOFTMAX"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.SOFTMAX</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.TANH"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.TANH</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.LayerKind.UNKNOWN"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.LayerKind.UNKNOWN</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.dtype"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.dtype</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.layer"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.layer</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.name"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ResponseInfo.shape"><code class="docutils literal notranslate"><span class="pre">ResponseInfo.shape</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails"><code class="docutils literal notranslate"><span class="pre">_ModelDetails</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails.get_input_layer_responses"><code class="docutils literal notranslate"><span class="pre">_ModelDetails.get_input_layer_responses()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails.get_response_infos"><code class="docutils literal notranslate"><span class="pre">_ModelDetails.get_response_infos()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base._model._ModelDetails.run_inference"><code class="docutils literal notranslate"><span class="pre">_ModelDetails.run_inference()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introspectors">Introspectors</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Introspector"><code class="docutils literal notranslate"><span class="pre">Introspector</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.Introspector.introspect"><code class="docutils literal notranslate"><span class="pre">Introspector.introspect</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.multi_introspect"><code class="docutils literal notranslate"><span class="pre">multi_introspect()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities">Utilities</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.__call__"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.attach_metadata"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.attach_metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.max_samples"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.max_samples</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.shuffle"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.shuffle()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.split_dataset"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.split_dataset</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.TrainTestSplitProducer.subset"><code class="docutils literal notranslate"><span class="pre">TrainTestSplitProducer.subset()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer"><code class="docutils literal notranslate"><span class="pre">CachedProducer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer.__call__"><code class="docutils literal notranslate"><span class="pre">CachedProducer.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer.copy_to"><code class="docutils literal notranslate"><span class="pre">CachedProducer.copy_to()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.CachedProducer.storage_path"><code class="docutils literal notranslate"><span class="pre">CachedProducer.storage_path</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer"><code class="docutils literal notranslate"><span class="pre">ImageProducer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer.__call__"><code class="docutils literal notranslate"><span class="pre">ImageProducer.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer.field"><code class="docutils literal notranslate"><span class="pre">ImageProducer.field</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageProducer.image_paths"><code class="docutils literal notranslate"><span class="pre">ImageProducer.image_paths</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageFormat"><code class="docutils literal notranslate"><span class="pre">ImageFormat</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageFormat.CHW"><code class="docutils literal notranslate"><span class="pre">ImageFormat.CHW</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.ImageFormat.HWC"><code class="docutils literal notranslate"><span class="pre">ImageFormat.HWC</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dnikit.base.peek_first_batch"><code class="docutils literal notranslate"><span class="pre">peek_first_batch()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Apple, Inc.
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023 Apple Inc. All rights reserved..
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>